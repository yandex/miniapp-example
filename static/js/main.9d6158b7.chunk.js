(this["webpackJsonpminiapp-example"]=this["webpackJsonpminiapp-example"]||[]).push([[1],[,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d}));var n=a(5),r=a(10),i=a(54),c=a(166);function s(e){return JSON.stringify(e,Object.keys(e).sort())}function o(e){return JSON.parse(e)}function l(e){var t=new Date;t.setHours(0,0,0,0);var a=t.getTime();return Object.keys(e).filter(e=>"_persist"!==e).reduce((t,n)=>(t[n]=Object.keys(e[n]).reduce((t,r)=>{var{date:c}=o(r);if(!c)return t[r]=e[n][r],t;var s=Object(i.parse)(c).getTime();return a<=s&&(t[r]=e[n][r]),t},{}),t),{})}function u(e,t){return Object(n.a)(Object(n.a)({},t),{},{storage:Object(c.a)({name:"miniapp-example",storeName:"redux-persist"}),key:e,serialize:!1,deserialize:!1,version:7,migrate:(e,t)=>{var a=(e&&e._persist.version)===t?e:void 0;return Promise.resolve(a)},timeout:1e4})}function d(e){return Object(r.a)((t,a)=>"ui"===a?e:t)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var n=a(0),r=a.n(n),i=a(99),c=a.n(i),s=({className:e,width:t,height:a})=>r.a.createElement("div",{className:l(c.a.rect,e),style:{width:t,height:a}}),o=({className:e,width:t,size:a})=>r.a.createElement("div",{className:l(c.a.text,e),style:{width:t,height:a}});function l(...e){return e.filter(Boolean).join(" ")}},function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),function(e){e.OauthAccessDenied="oauth_access_denied",e.OauthUnauthorizedClient="oauth_unauthorized_client",e.JsApiDenied="js_api_denied",e.JsApiCancelled="js_api_cancelled",e.JsApiAlreadyShown="js_api_already_shown",e.JsApiMethodNotAvailable="js_api_method_not_available"}(n||(n={}));class r extends Error{constructor(e,t){super(t),this.code=void 0,this.code=e,this.name="AppError"}}},,,,function(e,t,a){"use strict";var n=a(40),r=a(5),i=a(2),c=a(79),s={retryCount:2,retryDelay:2e3};function o(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach(([e,a])=>{if("undefined"!==typeof a)return Array.isArray(a)?a.forEach(a=>t.append(e,a)):void t.append(e,a.toString())}),t.toString()}function l(e,t){return u.apply(this,arguments)}function u(){return(u=Object(i.a)((function*(e,t,a=s){for(var{retryCount:n,retryDelay:r}=a,i=0;i<=Math.max(n,0);i++)try{return yield fetch(e,t)}catch(c){if(i===n)throw c;r&&(yield new Promise(e=>setTimeout(e,r)))}return Promise.reject("Unable to fetch. Check retryOptions values")}))).apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return(m=Object(i.a)((function*(e,t){var a=yield l(e,t);return a.ok?a.json():Promise.reject(a)}))).apply(this,arguments)}function p(e,t,a,n){return f.apply(this,arguments)}function f(){return(f=Object(i.a)((function*(e,t,a,n){return d("".concat(e).concat(t).concat(o(a)?"?".concat(o(a)):""),n)}))).apply(this,arguments)}function b(e,t,a){return v.apply(this,arguments)}function v(){return(v=Object(i.a)((function*(e,t,a){return d("".concat(e).concat(t),Object(r.a)(Object(r.a)({},a),{},{method:"POST",headers:Object(r.a)(Object(r.a)({},a.headers),{},{"Content-Type":"application/json"})}))}))).apply(this,arguments)}a.d(t,"a",(function(){return y})),a.d(t,"f",(function(){return g})),a.d(t,"i",(function(){return j})),a.d(t,"c",(function(){return O})),a.d(t,"k",(function(){return E})),a.d(t,"d",(function(){return w})),a.d(t,"e",(function(){return C})),a.d(t,"j",(function(){return N})),a.d(t,"l",(function(){return A})),a.d(t,"h",(function(){return x})),a.d(t,"b",(function(){return L})),a.d(t,"n",(function(){return I})),a.d(t,"g",(function(){return M})),a.d(t,"m",(function(){return P}));var y={name:"\u041c\u043e\u0441\u043a\u0432\u0430",geoid:213,longitude:37.611347,latitude:55.760241},h=null!=="/miniapp-example"?"/miniapp-example":"",_=null!=="https://miniapp-api.tap.yandex.net"?"https://miniapp-api.tap.yandex.net":"";function g(e){return p(h,"/api/event/".concat(e,".json"))}function j(e,t){return p(h,"/api/rubric-events/".concat(e,".json"),t)}function O(e){return p(h,"/api/actual-events.json",e)}function E(e){return p(h,"/api/selections.json",e)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)((function*(e){var t=(yield C()).cities.map(t=>{var a=Object(c.b)(e.latitude,e.longitude,t.latitude,t.longitude);return Object(r.a)(Object(r.a)({},t),{},{distance:a})}),a=1/0;return{cityInfo:t.reduce((e,t)=>{var{distance:r}=t,i=Object(n.a)(t,["distance"]);return r<a?(a=r,i):e},Object(r.a)(Object(r.a)({},y),{},{eventsMenu:[]}))}}))).apply(this,arguments)}function C(){return p(h,"/api/city-list.json")}function N(e,t){return p(h,"/api/selection-events/".concat(e,".json"),t)}function A(e,t,a){return p(h,"/api/suggest.json",{text:e,geoid:t},{signal:a})}function x(e){return p(h,"/api/recommended-events.json",e)}function S(e){var{jwtToken:t,oauthToken:a}=e;return t?{Authorization:t}:a?{Authorization:"OAuth ".concat(a)}:void 0}function L(e,t){return b(_,"/payment",{body:JSON.stringify(e),headers:S(t)})}function I(e,t){return b(_,"/payment/user-info",{body:JSON.stringify(e),headers:S(t)})}function M(e){return p(_,"/payments",void 0,{headers:S(e)})}function P(e){return p(_,"/user-info",void 0,{headers:S({oauthToken:e})})}},function(e,t,a){"use strict";var n,r,i=a(2),c=a(5),s=a(8),o=a(157),l=a(10),u=a(35),d=a(7),m=a(11),p=a(4),f=a(27);!function(e){e.NotLoggedIn="AuthErrorCode::ERROR_NOT_LOGGED_IN",e.AuthorizationDenied="AuthErrorCode::ERROR_AUTHORIZATION_DENIED",e.AuthorizationCancelled="AuthErrorCode::ERROR_AUTHORIZATION_CANCELLED"}(n||(n={})),function(e){e.Info="login:info",e.Email="login:email",e.Avatar="login:avatar"}(r||(r={}));var b,v="9e445c9aacec4266bf265302facb8293";function y(){return(y=Object(i.a)((function*(){try{var e,t,a;return yield Object(f.a)({name:"window.yandex.app.auth.identify",args:[v],scope:null===(e=window)||void 0===e||null===(t=e.yandex)||void 0===t||null===(a=t.app)||void 0===a?void 0:a.auth,method:"identify"})}catch(i){var{name:r}=i;if(r===n.NotLoggedIn)throw new d.a(d.b.JsApiCancelled,"User not logged.");throw i}}))).apply(this,arguments)}function h(){return(h=Object(i.a)((function*(e){try{var t,a,r;return yield Object(f.a)({name:"window.yandex.app.auth.authorize",args:[v,e],scope:null===(t=window)||void 0===t||null===(a=t.yandex)||void 0===a||null===(r=a.app)||void 0===r?void 0:r.auth,method:"authorize"})}catch(c){var{name:i}=c;if(i===n.AuthorizationDenied)throw new d.a(d.b.JsApiDenied,"Authorization denied.");if([n.NotLoggedIn,n.AuthorizationCancelled].includes(i))throw new d.a(d.b.JsApiCancelled,"Authorization cancelled.");throw c}}))).apply(this,arguments)}function _(){return(_=Object(i.a)((function*(){try{var e,t,a;return yield Object(f.a)({name:"window.yandex.app.auth.getCurrentUserId",args:[v],scope:null===(e=window)||void 0===e||null===(t=e.yandex)||void 0===t||null===(a=t.app)||void 0===a?void 0:a.auth,method:"getCurrentUserId"})}catch(i){var{name:r}=i;if(r===n.NotLoggedIn)throw new d.a(d.b.JsApiCancelled,"User not logged.");throw i}}))).apply(this,arguments)}!function(e){e.AccessDenied="access_denied",e.UnauthorizedClient="unauthorized_client"}(b||(b={}));var g=function(){var e=new URLSearchParams(window.location.hash.slice(1)),t=e.get("access_token"),a=e.get("error"),n=e.get("error_description");if(t||a){var r=new URL(window.location.href);r.hash="",window.history.replaceState(window.history.state,document.title,r.toString())}return{token:t,error:a,errorDescription:n}}();function j(){var e=new URLSearchParams;e.append("client_id",v),e.append("redirect_uri","".concat(window.location.origin).concat(window.location.pathname)),e.append("response_type","token"),window.location.href="https://oauth.yandex.ru/authorize?".concat(e.toString())}var O=a(24);a.d(t,"i",(function(){return N})),a.d(t,"l",(function(){return A})),a.d(t,"k",(function(){return x})),a.d(t,"g",(function(){return S})),a.d(t,"j",(function(){return L})),a.d(t,"f",(function(){return I})),a.d(t,"e",(function(){return M})),a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return D})),a.d(t,"h",(function(){return F})),a.d(t,"c",(function(){return B}));var E={persist:{currentUser:{}},nonpersist:{}},w=Object(s.c)({name:"user",initialState:E,reducers:{authenticated(e,t){var a=t.payload;"psuid"in a?(e.persist.psuid=a.psuid,e.persist.jwtToken=a.jwtToken):e.persist.oauthToken=a.oauthToken,delete e.persist.loggedOutPsuid,delete e.nonpersist.isSessionLoggedOut},authorized(e,t){e.persist.currentUser=t.payload.user},logout:e=>({persist:Object(c.a)(Object(c.a)({},E.persist),{},{loggedOutPsuid:e.persist.psuid}),nonpersist:Object(c.a)(Object(c.a)({},E.nonpersist),{},{isSessionLoggedOut:!0})})},extraReducers:e=>{e.addCase(u.a,()=>E)}}),{authenticated:k,authorized:C,logout:N}=w.actions,A=e=>e.user.persist.currentUser,x=e=>e.user.persist.psuid,S=e=>e.user.persist.jwtToken,L=e=>e.user.persist.oauthToken,I=e=>Boolean(e.user.persist.currentUser.uid),M=Object(o.a)(S,L,(e,t)=>Boolean(null!==e&&void 0!==e?e:t)),P=[r.Avatar,r.Info,r.Email],R=e=>function(){var t=Object(i.a)((function*(t){t(k({oauthToken:e})),t(Object(O.f)());try{var a=yield Object(m.m)(e);t(C({user:a}))}catch(n){console.error(n),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435")}}));return function(e){return t.apply(this,arguments)}}(),U=()=>function(){var e=Object(i.a)((function*(e,t){var a=t(),n=L(a);if(!(e=>Boolean(e.user.nonpersist.isSessionLoggedOut))(a))try{var r=function(e={}){var{withError:t}=e,{token:a,error:n,errorDescription:r}=g;if(n&&t){var i=r?decodeURIComponent(r):"unknown reason";switch(n){case b.AccessDenied:throw new d.a(d.b.OauthAccessDenied,"OAuth access denied: ".concat(i));case b.UnauthorizedClient:throw new d.a(d.b.OauthUnauthorizedClient,"OAuth unauthorized client: ".concat(i))}}return a}({withError:!0});if(!r)return void(n&&e(R(n)));n&&n!==r&&e(Object(u.a)()),e(R(r))}catch(c){var{code:i}=c;switch(n&&e(Object(u.a)()),i){case d.b.OauthAccessDenied:return console.warn(c);default:console.error(c)}}}));return function(t,a){return e.apply(this,arguments)}}(),T=e=>function(){var t=Object(i.a)((function*(t,a){try{var n=x(a()),r=yield function(){return y.apply(this,arguments)}();n&&n!==r.payload.psuid&&t(Object(u.a)()),t(k({jwtToken:r.jwtToken,psuid:r.payload.psuid})),null===e||void 0===e||e()}catch(c){var{code:i}=c;switch(i){case d.b.JsApiCancelled:return console.warn(c);case d.b.JsApiMethodNotAvailable:return j()}console.error(c),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}}));return function(e,a){return t.apply(this,arguments)}}(),D=()=>function(){var e=Object(i.a)((function*(e){try{var{userInfo:t}=yield function(e){return h.apply(this,arguments)}(P);e(C({user:t.payload}))}catch(n){var{code:a}=n;switch(a){case d.b.JsApiDenied:case d.b.JsApiCancelled:return console.warn(n);case d.b.JsApiMethodNotAvailable:return j()}console.error(n),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435")}}));return function(t){return e.apply(this,arguments)}}(),F=()=>function(){var e=Object(i.a)((function*(e){yield e(T(()=>{e(Object(O.f)())}))}));return function(t){return e.apply(this,arguments)}}(),B=()=>function(){var e=Object(i.a)((function*(e,t){var a=x(t());try{var n=yield function(){return _.apply(this,arguments)}();if(a&&(null===n||void 0===n?void 0:n.payload.psuid)!==a&&e(Object(u.a)()),!n)return;var r=n.payload.psuid;if(r===t().user.persist.loggedOutPsuid)return;e(k({jwtToken:n.jwtToken,psuid:r})),e(Object(O.f)())}catch(c){var{code:i}=c;switch(a&&e(Object(u.a)()),i){case d.b.JsApiCancelled:return console.warn(c);case d.b.JsApiMethodNotAvailable:return e(U());default:console.error(c)}}}));return function(t,a){return e.apply(this,arguments)}}(),J=Object(p.b)("user",{whitelist:["persist"]});t.d=Object(l.b)(J,w.reducer)},,,function(e,t,a){e.exports={image:"styles_image__Xibal","button-wrapper":"styles_button-wrapper__1xmRh",button:"styles_button__3ugFI","date-1":"styles_date-1__1KrEV","date-2":"styles_date-2__u1uuX",map:"styles_map__1GZMr","place-1":"styles_place-1__2BRJQ","place-2":"styles_place-2__1cKpq",gallery:"styles_gallery__33Vja","gallery-header":"styles_gallery-header__2mb0M","gallery-content":"styles_gallery-content__3RMTY","gallery-card":"styles_gallery-card__1qkm9",description:"styles_description__hdSqE","description-line-1":"styles_description-line-1__26Xb3","description-line-2":"styles_description-line-2__20hRv","description-line-3":"styles_description-line-3__1VXVh","description-line-4":"styles_description-line-4__2BYM0","description-line-5":"styles_description-line-5__3aCps",recommended:"styles_recommended__3JCFj"}},function(e,t,a){"use strict";a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return b}));var n=a(2),r=a(8),i=a(10),c=a(11),s=a(4),o={data:{},ui:{}},l=Object(r.c)({name:"event",initialState:o,reducers:{fetchStart(e,t){var{id:a}=t.payload;e.data[a]||(e.data[a]={event:null,schedule:null,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].event?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{id:a,event:n}=t.payload;e.data[a].event=n.event,e.data[a].schedule=n.scheduleInfo,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{id:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},setEvents(e,t){var{events:a}=t.payload;a.forEach(t=>{if(t){var{id:a}=t.event;e.data[a]||(e.data[a]={event:null,schedule:null,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].event=t.event,e.data[a].schedule=t.scheduleInfo,e.data[a].updatedAt=Date.now()}})}}}),{fetchStart:u,fetchSuccess:d,fetchError:m,setEvents:p}=l.actions,f=e=>t=>{var a;return null!==(a=t.event.data[e])&&void 0!==a?a:{}},b=e=>function(){var t=Object(n.a)((function*(t,a){var n=a().event.data[e];if(!(n&&n.updatedAt+3e5>Date.now())){t(u({id:e}));try{var r=yield Object(c.f)(e);t(d({id:e,event:r}))}catch(i){console.error(i),t(m({id:e,error:i}))}}}));return function(e,a){return t.apply(this,arguments)}}(),v=Object(s.b)("events",{transforms:[Object(s.c)(o.ui)]});t.a=Object(i.b)(v,l.reducer)},,function(e,t,a){"use strict";var n=a(2),r=a(27);function i(){return(i=Object(n.a)((function*(e,t){try{var a,n;yield Object(r.a)({name:"window.yandex.app.reportGoalReached",args:[e,t],scope:null===(a=window)||void 0===a||null===(n=a.yandex)||void 0===n?void 0:n.app,method:"reportGoalReached"})}catch(i){console.error(i)}}))).apply(this,arguments)}a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d}));var c,s={defer:!0,clickmap:!0,trackLinks:!0,trackHash:!0,accurateTrackBounce:!0,ecommerce:"dataLayer"};function o(){var e,t,a;window.dataLayer=null!==(e=window.dataLayer)&&void 0!==e?e:[],null===(t=(a=window).ym)||void 0===t||t.call(a,62405404,"init",s)}function l(e,t){var a,n;null===(a=(n=window).ym)||void 0===a||a.call(n,62405404,"hit",e,t)}function u(e,t){var a,n;null===(a=(n=window).ym)||void 0===a||a.call(n,62405404,"reachGoal",e,t)}function d(e,t){!function(e,t){i.apply(this,arguments)}(e,t)}!function(e){e.OrderInitiated="order_initiated",e.OrderCompleted="order_completed",e.OrderError="order_error"}(c||(c={}))},,,,,function(e,t,a){e.exports={"page-header":"styles_page-header__3SRj-","page-header_clear":"styles_page-header_clear__1-0qG","menu-button":"styles_menu-button__27a1S","backward-button":"styles_backward-button__1gLVd","burger-menu-icon":"styles_burger-menu-icon__30H4q",logo:"styles_logo__3HQmN",text:"styles_text__2t8C3","suggest-button":"styles_suggest-button__jwrxc","suggest-icon":"styles_suggest-icon__YMWw5","icon-white":"styles_icon-white__3C4HZ","icon-black":"styles_icon-black__3s7hW"}},function(e,t,a){"use strict";var n=a(2),r=a(8),i=a(157),c=a(10),s=a(35),o=a(4),l=a(27);function u(e){var t,a,n;return Object(l.a)({name:"window.yandex.app.push.getPushTokenForTransaction",args:[e],scope:null===(t=window)||void 0===t||null===(a=t.yandex)||void 0===a||null===(n=a.app)||void 0===n?void 0:n.push,method:"getPushTokenForTransaction"})}var d=a(11),m=a(18),p=a(96),f=a(7);function b(){return(b=Object(n.a)((function*(e,t){var{paymentToken:a,cost:n,id:r}=e,{email:i}=t,c={supportedMethods:"yandex",data:{userEmail:i,paymentToken:a}},s={id:r.toString(),total:{label:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0431\u0438\u043b\u0435\u0442\u0430",amount:{value:n.toString(),currency:"RUB"}}};if(!window.PaymentRequest)throw new f.a(f.b.JsApiMethodNotAvailable,"window.PaymentRequest is not available in this browser version.");try{var o=new PaymentRequest([c],s);if(!(yield o.canMakePayment()))throw new f.a(f.b.JsApiMethodNotAvailable,"request.canMakePayment() returns false.");var l=yield o.show();yield l.complete("success")}catch(d){var{message:u}=d;if(u.includes("[NOT_STARTED]"))throw new f.a(f.b.JsApiCancelled,"window.PaymentRequest canceled.");if(u.includes("Already called show"))throw new f.a(f.b.JsApiAlreadyShown,"window.PaymentRequest already shown.");throw d}}))).apply(this,arguments)}var v=a(12);a.d(t,"b",(function(){return w})),a.d(t,"k",(function(){return A})),a.d(t,"c",(function(){return x})),a.d(t,"g",(function(){return S})),a.d(t,"j",(function(){return L})),a.d(t,"h",(function(){return I})),a.d(t,"i",(function(){return M})),a.d(t,"f",(function(){return P})),a.d(t,"d",(function(){return R})),a.d(t,"a",(function(){return U}));var y={data:{orders:[]},ui:{}},h=Object(r.c)({name:"order",initialState:y,reducers:{fetchStart(e){e.ui.isLoading=!0},fetchSuccess(e,t){e.ui.isLoading=!1,e.data.orders=t.payload},fetchError(e){e.ui.isLoading=!1},orderCreationStart(e){e.ui.isCheckoutInProgress=!0,e.ui.isOrderCreationInProgress=!0},orderCreationSuccess(e,t){e.data.activeOrder=t.payload,e.ui.isOrderCreationInProgress=!1},orderCreationEnd(e){e.ui.isOrderCreationInProgress=!1},paymentStart(e){e.ui.isPaymentInProgress=!0},paymentEnd(e){e.ui.isPaymentInProgress=!1},checkoutEnd(e){e.ui.isCheckoutInProgress=!1,delete e.data.activeOrder}},extraReducers:e=>{e.addCase(s.a,()=>y)}}),{fetchStart:_,fetchSuccess:g,fetchError:j,paymentStart:O,paymentEnd:E,checkoutEnd:w,orderCreationStart:k,orderCreationSuccess:C,orderCreationEnd:N}=h.actions,A=e=>Boolean(e.order.ui.isPaymentInProgress),x=e=>Boolean(e.order.ui.isCheckoutInProgress),S=e=>Boolean(e.order.ui.isOrderCreationInProgress),L=e=>e.order.data.orders,I=Object(i.a)(L,e=>Array.from(new Set(e.map(e=>e.event.id)))),M=Object(i.a)(I,e=>e.order.ui,e=>e.event.ui,(e,t,a)=>{var n=e.some(e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.isLoading});return t.isLoading||n}),P=()=>function(){var e=Object(n.a)((function*(e,t){var a=t(),n=Object(v.g)(a),r=Object(v.j)(a);if(n||r){e(_());try{var i=yield Object(d.g)({jwtToken:n,oauthToken:r});e(g(i))}catch(c){console.error(c),e(j())}}}));return function(t,a){return e.apply(this,arguments)}}(),R=(e,t=(()=>{}),a=!0)=>function(){var r=Object(n.a)((function*(n,r){var i,c=r(),s=Object(v.g)(c),o=Object(v.j)(c);n(k());try{var l={order_id:(i=yield Object(d.b)({eventId:e.id,amount:1},{jwtToken:s,oauthToken:o})).id,price:i.cost,price_without_discount:i.cost};Object(m.d)(m.a.OrderInitiated,l),Object(m.e)(m.a.OrderInitiated,l),n(C(i)),t()}catch(u){if(n(N()),401===u.status&&a)return n(Object(v.a)(()=>n(R(e,t,!1))))}}));return function(e,t){return r.apply(this,arguments)}}(),U=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var r=n(),i=Object(v.g)(r),c=Object(v.j)(r),s=(e=>e.order.data.activeOrder)(r);if(a(O()),S(n()))throw new Error("Payment is not available. Order creating now");if(!s)return a(R(e,()=>U(e,t)));Object(p.a)(e);var o={order_id:s.id,price:s.cost,price_without_discount:s.cost};try{var l;yield function(e,t){return b.apply(this,arguments)}(s,t);var{pushToken:u}=null!==(l=yield function(e){return T.apply(this,arguments)}(s.paymentToken))&&void 0!==l?l:{};Object(d.n)({userInfo:t,paymentId:s.id,pushToken:u},{jwtToken:i,oauthToken:c}).catch(e=>console.error(e)),Object(m.d)(m.a.OrderCompleted,o),Object(m.e)(m.a.OrderCompleted,o),Object(p.b)(e,s.id),a(w())}catch(h){var{code:y}=h;switch(Object(m.d)(m.a.OrderError,o),y){case f.b.JsApiCancelled:case f.b.JsApiAlreadyShown:return;case f.b.JsApiMethodNotAvailable:return console.warn(h),alert("\u041f\u043b\u0430\u0442\u0435\u0436\u0438 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430");default:console.error(h),alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u0431\u0438\u043b\u0435\u0442\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}}finally{a(E()),a(P())}}));return function(e,t){return a.apply(this,arguments)}}();function T(){return(T=Object(n.a)((function*(e){var t=null;try{t=yield u(e)}catch(a){console.warn(a)}return t}))).apply(this,arguments)}var D=Object(o.b)("order",{transforms:[Object(o.c)(y.ui)]});t.e=Object(c.b)(D,h.reducer)},function(e,t,a){"use strict";function n(){return"/"}function r(e){return"/event/".concat(e)}function i(e){return"/events/".concat(encodeURIComponent(e))}function c(e){return"/selection/".concat(encodeURIComponent(e))}function s(){return"/search"}function o(){return"/orders"}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return o}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=e=>Object(n.lazy)(()=>Promise.all([new Promise(t=>setTimeout(()=>t(e()),50)),new Promise(e=>setTimeout(e,500))]).then(([e])=>e))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(7);function r({name:e,args:t,scope:a,method:r}){var i=a?a[r]:null;if(!i)throw new n.a(n.b.JsApiMethodNotAvailable,"".concat(e," is not available in this browser version."));return i.apply(a,t)}},function(e,t,a){e.exports={screen:"styles_screen__3Xc2f",hidden:"styles_hidden__319gL",screenEnter:"styles_screenEnter__1cDTX",screenEnterActive:"styles_screenEnterActive__3Aipd",screenExit:"styles_screenExit__16_m_",screenExitActive:"styles_screenExitActive__9q_ED",offset:"styles_offset__3ZkO6"}},function(e,t,a){e.exports={card:"styles_card__2fC7e",image:"styles_image__2rNd-",content:"styles_content__3r_Ib",right:"styles_right__39u8P",short:"styles_short__5IaPF"}},function(e,t,a){e.exports={modal:"style_modal__ArKGM",content:"style_content__36rzf",hidden:"style_hidden__153Qs",visible:"style_visible__2ITxB",body:"style_body__3TOLT",profile:"style_profile__4Kle_",psuid:"style_psuid__32HpM",logout:"style_logout__1unjr"}},function(e,t,a){e.exports={wrapper:"styles_wrapper__1LBcn",wrapper_loading:"styles_wrapper_loading__3wiy0","wrapper-visible_yes":"styles_wrapper-visible_yes__1gZE6",slideUp:"styles_slideUp__ugjBN","wrapper-visible_no":"styles_wrapper-visible_no__3CTrI",slideDown:"styles_slideDown__1-rC7",title:"styles_title__2H0i0","auto-select-box":"styles_auto-select-box__1KSTl",selected:"styles_selected__3i7jO","selected-city-label":"styles_selected-city-label__107bE","selected-city-name":"styles_selected-city-name__3y9wk",button:"styles_button__32WSn"}},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o}));var n=a(8),r=a(10),i=a(4),c=Object(n.c)({name:"menu",initialState:{visible:!1,items:[],activeItem:""},reducers:{setItems(e,t){e.items=t.payload},setVisible(e,t){e.visible=t.payload}}}),{setItems:s,setVisible:o}=c.actions,l=Object(i.b)("menu");t.a=Object(r.b)(l,c.reducer)},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(8),r=Object(n.b)("cleanup")},function(e,t,a){e.exports={card:"style_card__2T-VX",title:"style_title__RuqCf",annotation:"style_annotation__n8doS","image-wrapper":"style_image-wrapper__3JJK-","image-overlay":"style_image-overlay__29ffx",image:"style_image__Lux1b",preview:"style_preview__3loTl"}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(61),c=a(171),s=a.n(c);t.a=({itemsGap:e=i.a,count:t,card:a})=>r.a.createElement("div",{className:s.a.events,style:{gridGap:"".concat(e,"px")}},Array(t).fill(0).map((e,t)=>r.a.createElement(a,{key:t})))},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=()=>(/iPad|iPhone|iPod/.test(navigator.platform)||/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(3),c=a(20),s=a(34),o=a(32),l=a(25),u=a(80),d=a(59),m=a(23),p=a.n(m),f=()=>r.a.createElement(c.b,{to:Object(l.b)(),className:p.a.logo},"MiniApp Example"),b=({fill:e="black"})=>{var t=[p.a["suggest-icon"],p.a["icon-".concat(e)]].join(" ");return r.a.createElement("span",{className:t})};function v(e,t){return t?"".concat(p.a[e]," ").concat(p.a["".concat(e,"_").concat(t)]):p.a[e]}t.a=Object(n.memo)(e=>{var{hasMenu:t,hasLogo:a,backward:c,mods:m,text:y}=e,h=Object(s.d)(),_=Object(i.b)(),g=Object(n.useCallback)(()=>{h.push(Object(l.e)())},[h]),j=Object(n.useCallback)(()=>{_(Object(o.c)(!0))},[_]);return r.a.createElement("header",{className:v("page-header",m)},Boolean(c)&&r.a.createElement(u.a,{className:p.a["backward-button"],fill:c||"black"}),Boolean(t)&&r.a.createElement(d.a,{className:p.a["menu-button"],onClick:j},r.a.createElement("span",{className:p.a["burger-menu-icon"]})),a&&r.a.createElement(f,null),y&&r.a.createElement("span",{className:p.a.text},y),r.a.createElement(d.a,{className:p.a["suggest-button"],onClick:g},r.a.createElement(b,{fill:m?"white":"black"})))})},,function(e,t,a){e.exports={list:"style_list__1E8sL",item:"style_item__2Gtnq","orders-text":"style_orders-text__2Hcw-",link:"style_link__5kR7b","active-item":"style_active-item__1n702"}},,,,,,function(e,t,a){e.exports={feed:"styles_feed__RntQS",title:"styles_title__2JRen",events:"styles_events___mJxb",item:"styles_item__2O9gA"}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(0),r=a(51);function i(e){var t=Object(n.useContext)(r.a).onBackward;return Object(n.useMemo)(()=>t.bind(null,e),[t,e])}function c(){return Object(n.useContext)(r.a).isVisible}function s(){return Object(n.useContext)(r.a).ref}},function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return b})),a.d(t,"c",(function(){return v}));var n=a(2),r=a(5),i=a(8),c=a(10),s=a(11),o=a(4),l={data:{},ui:{}},u=Object(i.c)({name:"selections",initialState:l,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={items:[],updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,items:n}=t.payload,r=[];for(var i of n)i&&r.push({code:i.code,title:i.title,count:i.count,image:i.events&&i.events[0]&&i.events[0].eventPreview&&i.events[0].eventPreview.image});e.data[a].items=r,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:d,fetchSuccess:m,fetchError:p}=u.actions,f=e=>{var t=Object(o.a)(Object(r.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.data[t]},b=e=>{var t=Object(o.a)(Object(r.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.ui[t]},v=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var i=Object(o.a)(Object(r.a)({geoid:t},e)),c=n().selections.data[i];if(!(c&&c.updatedAt+3e5>Date.now())){a(d({key:i}));try{var l=yield Object(s.k)(Object(r.a)(Object(r.a)({},e),{},{geoid:t}));a(m({key:i,items:l.selections}))}catch(u){console.error(u),a(p({key:i,error:u}))}}}));return function(e,t){return a.apply(this,arguments)}}(),y=Object(o.b)("selections",{stateReconciler:o.e,transforms:[Object(o.c)(l.ui)]});t.a=Object(c.b)(y,u.reducer)},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),r=Object(n.createContext)({onBackward:()=>{},isVisible:!1,ref:Object(n.createRef)()})},function(e,t,a){e.exports={card:"styles_card__2krq5",image:"styles_image__3rHyi",right:"styles_right__3yAG9",title:"styles_title__1qP6K",description:"styles_description__2Ze_3"}},function(e,t,a){e.exports={input:"styles_input__ldYiA",wrapper:"styles_wrapper__1qFlf","wrapper-visible_yes":"styles_wrapper-visible_yes__3Xlii",slideUp:"styles_slideUp__2GPyJ","wrapper-visible_no":"styles_wrapper-visible_no__2Kq0Z",slideDown:"styles_slideDown__3yIqZ","city-list":"styles_city-list__2FmDB","city-item":"styles_city-item__TNmcc"}},,,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(169),c=a.n(i);t.a=({className:e,children:t,onClick:a})=>{var n=[c.a.clear,e].filter(Boolean).join(" ");return r.a.createElement("button",{className:n,onClick:a},t)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=18},function(e,t,a){e.exports={card:"styles_card__eFyRm",image:"styles_image__1XdLR",title:"styles_title__2aX7M",description:"styles_description__hf2zy"}},function(e,t,a){e.exports={container:"styles_container__2ZLnU",image:"styles_image__1OXdh",stub:"styles_stub__2rGlh","stub-hidden":"styles_stub-hidden__wNOO_",fadeIn:"styles_fadeIn__Wb4n6"}},function(e,t,a){e.exports={title:"styles_title__1IJnF",events:"styles_events__3m_nB",event:"styles_event__15ocv",link:"styles_link__OwBgq"}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(63),c=a.n(i);t.a=e=>{var t=e.bgColor||"#555",[a,i]=Object(n.useState)(!1),s=Object(n.useCallback)(()=>{e.src&&i(!0)},[i,e.src]),o=[c.a.stub,a&&c.a["stub-hidden"]].filter(Boolean).join(" "),l=[e.className,c.a.container].filter(Boolean).join(" ");return r.a.createElement("div",{className:l},r.a.createElement("img",{className:c.a.image,onLoad:s,src:e.src?e.src.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",srcSet:e.src2x?"".concat(e.src2x.url," 2x"):void 0,alt:e.alt}),r.a.createElement("div",{className:o,style:{backgroundColor:t}}))}},,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(6),c=a(52),s=a.n(c);t.a=()=>r.a.createElement("div",{className:s.a.card},r.a.createElement(i.a,{className:s.a.image}),r.a.createElement("div",{className:s.a.right},r.a.createElement(i.b,{className:s.a.title}),r.a.createElement(i.b,{className:s.a.description})))},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(38),c=a(5),s=a(34),o=a(295),l=a(294),u=a(51),d=a(28),m=a.n(d),p=({isVisible:e,transitions:t,screen:a,onBackward:c})=>{var s=Object(i.a)()?"":[m.a.screen,!e&&!t&&m.a.hidden].filter(Boolean).join(" "),o=Object(n.useRef)(null),l=Object(n.useMemo)(()=>({onBackward:c,isVisible:e,ref:o}),[c,e,o]);return r.a.createElement(u.a.Provider,{value:l},r.a.createElement("div",{className:s,ref:o},r.a.createElement(a.component,{params:a.params,location:a.location})))},f={enter:m.a.screenEnter,enterActive:m.a.screenEnterActive,exit:m.a.screenExit,exitActive:m.a.screenExitActive},b={onEnter:e=>{e.previousElementSibling&&e.previousElementSibling.classList.add(m.a.offset)},onExit:e=>{e.previousElementSibling&&e.previousElementSibling.classList.remove(m.a.offset)}},v={enter:600,exit:500};var y=({screens:e,maxDepth:t=10,transitions:a=!1})=>{var[u,d]=Object(n.useState)([]),m=Object(s.e)(),y=Object(s.d)(),h=Object(i.a)();!function(e){var t=Object(s.e)();Object(n.useEffect)(e,[t])}(()=>{h&&window.scrollTo(0,0);var a="POP"===y.action,n="REPLACE"===y.action;if(a&&u.length>1)d(u.slice(0,-1));else{var r=null,i=null;for(var o of e)if(i=Object(s.c)(m.pathname,o)){r=o;break}if(r&&i){var l={id:m.key||Date.now().toString(),component:r.component,params:i.params,location:Object(c.a)({},m)};if(a&&1===u.length)d([l]);else if(n)if(r.component===u[u.length-1].component){var p=[...u];p[u.length-1]=Object(c.a)(Object(c.a)({},p[u.length-1]),{},{params:l.params,location:l.location}),d(p)}else d([...u.slice(0,-1),l]);else{var f=[...u,l];f.length>t&&f.splice(0,u.length-t+1),d(f)}}else console.warn("No screen matched for route",m.pathname)}});var _=Object(n.useCallback)(({fallback:e}={})=>{h&&window.scrollTo(0,0),y.length>1?y.goBack():e&&y.replace(e)},[y,h]);if(a&&!h)return r.a.createElement(o.a,{component:null},u.map((e,t)=>r.a.createElement(l.a,{key:e.id,timeout:v,classNames:f,enter:1!==u.length,exit:1!==u.length,onEnter:b.onEnter,onExit:b.onExit},r.a.createElement(p,{key:e.id,isVisible:t===u.length-1,transitions:!0,onBackward:_,screen:e}))));if(h){var g=u[u.length-1];return g?r.a.createElement(p,{isVisible:!0,onBackward:_,screen:g}):null}return r.a.createElement(r.a.Fragment,null,u.map((e,t)=>r.a.createElement(p,{key:e.id,isVisible:t===u.length-1,onBackward:_,screen:e})))},h=a(49);function _(e,t={}){return Object(i.a)()&&"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),()=>r.a.createElement(y,{screens:e,maxDepth:t.maxDepth,transitions:t.transitions})}a.d(t,"a",(function(){return _})),a.d(t,"b",(function(){return h.b})),a.d(t,"c",(function(){return h.c}))},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return v})),a.d(t,"d",(function(){return y}));var n=a(2),r=a(5),i=a(8),c=a(10),s=a(11),o=a(4),l=a(16),u={data:{},ui:{}},d=Object(i.c)({name:"actual-events",initialState:u,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={items:[],updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,items:n}=t.payload;e.data[a].items=n,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:m,fetchSuccess:p,fetchError:f}=d.actions,b=e=>{var t=Object(o.a)(Object(r.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.data[t]},v=e=>{var t=Object(o.a)(Object(r.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.ui[t]},y=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var i=Object(o.a)(Object(r.a)({geoid:t},e)),c=n().actualEvents.data[i];if(!(c&&c.updatedAt+3e5>Date.now())){a(m({key:i}));try{var{events:u}=yield Object(s.c)(Object(r.a)(Object(r.a)({},e),{},{geoid:t}));u.prefetchItems&&(a(Object(l.d)({events:u.prefetchItems})),delete u.prefetchItems),a(p({key:i,items:u.items}))}catch(d){console.error(d),a(f({key:i,error:d}))}}}));return function(e,t){return a.apply(this,arguments)}}(),h=Object(o.b)("actual-events",{stateReconciler:o.e,transforms:[Object(o.c)(u.ui)]});t.c=Object(c.b)(h,d.reducer)},function(e,t,a){"use strict";a.d(t,"d",(function(){return h})),a.d(t,"e",(function(){return _})),a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return j}));var n=a(2),r=a(5),i=a(8),c=a(10),s=a(11),o=a(4),l=a(16),u={data:{},ui:{}},d=Object(i.c)({name:"rubric-events",initialState:u,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[a].events.items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,events:n,title:r}=t.payload;e.data[a].title=r,e.data[a].events=n,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchMoreStart(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!0},fetchMoreSuccess(e,t){var{key:a,events:n}=t.payload;e.data[a].events.items.push(...n.items),e.data[a].events.paging=n.paging,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoadingMore=!1},fetchMoreError(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!1}}}),{fetchStart:m,fetchSuccess:p,fetchError:f,fetchMoreStart:b,fetchMoreSuccess:v,fetchMoreError:y}=d.actions,h=e=>t=>{var a=Object(o.a)(Object(r.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.data[a]},_=e=>t=>{var a=Object(o.a)(Object(r.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.ui[a]},g=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:i}=n().city.currentCity,c=Object(o.a)(Object(r.a)({geoid:i,code:e},t)),u=n().rubricEvents.data[c];if(!(u&&u.updatedAt+3e5>Date.now())){a(m({key:c}));try{var{title:d,events:b}=yield Object(s.i)(e,Object(r.a)({geoid:i,offset:0,limit:10},t));b.prefetchItems&&(a(Object(l.d)({events:b.prefetchItems})),delete b.prefetchItems),a(p({key:c,title:d,events:b}))}catch(v){console.error(v),a(f({key:c,error:v}))}}}));return function(e,t){return a.apply(this,arguments)}}(),j=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:i}=n().city.currentCity,c=Object(o.a)(Object(r.a)({geoid:i,code:e},t));a(b({key:c}));try{var{offset:u}=n().rubricEvents.data[c].events.paging,{events:d}=yield Object(s.i)(e,Object(r.a)({geoid:i,offset:u+10,limit:10},t));d.prefetchItems&&(a(Object(l.d)({events:d.prefetchItems})),delete d.prefetchItems),a(v({key:c,events:d}))}catch(m){console.error(m),a(y({key:c,error:m}))}}));return function(e,t){return a.apply(this,arguments)}}(),O=Object(o.b)("rubric-events",{stateReconciler:o.e,transforms:[Object(o.c)(u.ui)]});t.a=Object(c.b)(O,d.reducer)},function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"e",(function(){return g})),a.d(t,"c",(function(){return j})),a.d(t,"b",(function(){return O}));var n=a(2),r=a(5),i=a(8),c=a(10),s=a(11),o=a(4),l=a(16),u=a(50),d={data:{},ui:{}},m=Object(i.c)({name:"selection-events",initialState:d,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[a].events.items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,events:n,title:r}=t.payload;e.data[a].title=r,e.data[a].events=n,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchMoreStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.ui[a].isLoadingMore=!0},fetchMoreSuccess(e,t){var{key:a,events:n}=t.payload;e.data[a].events.items.push(...n.items),e.data[a].events.paging=n.paging,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoadingMore=!1},fetchMoreError(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!1}},extraReducers:e=>{e.addCase(u.b,(e,t)=>{var{key:a,items:n}=t.payload,i=Object(o.d)(a);for(var c of n)if(c){var s=Object(o.a)(Object(r.a)({code:c.code},i)),l={items:c.events,paging:{offset:0,total:c.count}};e.data[s]?(e.data[s].events=l,e.data[s].hasMoreItems=Boolean(c.count>10),e.data[s].updatedAt=Date.now()):(e.data[s]={title:c.title,events:l,hasMoreItems:Boolean(c.count>10),updatedAt:0},e.ui[s]={isLoading:!1,isLoadingMore:!1,isUpdating:!1})}})}}),{fetchStart:p,fetchSuccess:f,fetchError:b,fetchMoreStart:v,fetchMoreSuccess:y,fetchMoreError:h}=m.actions,_=e=>t=>{var a=Object(o.a)(Object(r.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.data[a]},g=e=>t=>{var a=Object(o.a)(Object(r.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.ui[a]},j=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:i}=n().city.currentCity,c=Object(o.a)(Object(r.a)({geoid:i,code:e},t)),u=n().selectionEvents.data[c];if(!(u&&u.updatedAt+3e5>Date.now())){a(p({key:c}));try{var{title:d,events:m}=yield Object(s.j)(e,Object(r.a)({geoid:i,offset:0,limit:10},t));m.prefetchItems&&(a(Object(l.d)({events:m.prefetchItems})),delete m.prefetchItems),a(f({key:c,title:d,events:m}))}catch(v){console.error(v),a(b({key:c,error:v}))}}}));return function(e,t){return a.apply(this,arguments)}}(),O=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:i}=n().city.currentCity,c=Object(o.a)(Object(r.a)({geoid:i,code:e},t));a(v({key:c}));try{var{offset:u}=n().selectionEvents.data[c].events.paging,{events:d}=yield Object(s.j)(e,Object(r.a)({geoid:i,offset:u+10,limit:10},t));d.prefetchItems&&(a(Object(l.d)({events:d.prefetchItems})),delete d.prefetchItems),a(y({key:c,events:d}))}catch(m){console.error(m),a(h({key:c,error:m}))}}));return function(e,t){return a.apply(this,arguments)}}(),E=Object(o.b)("selection-events",{stateReconciler:o.e,transforms:[Object(o.c)(d.ui)]});t.a=Object(c.b)(E,m.reducer)},function(e,t,a){"use strict";a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return b})),a.d(t,"b",(function(){return v}));var n=a(2),r=a(8),i=a(10),c=a(11),s=a(4),o=a(16),l={data:{},ui:{}},u=Object(r.c)({name:"recommended-events",initialState:l,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].updatedAt?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,data:n}=t.payload;e.data[a].top=n.top,e.data[a].concert=n.concert,e.data[a].cinema=n.cinema,e.data[a].theatre=n.theatre,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:d,fetchSuccess:m,fetchError:p}=u.actions,f=e=>{var t=Object(s.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.data[t]},b=e=>{var t=Object(s.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.ui[t]},v=()=>function(){var e=Object(n.a)((function*(e,t){var{geoid:a}=t().city.currentCity,n=Object(s.a)({geoid:a}),r=t().recommendedEvents.data[n];if(!(r&&r.updatedAt+3e5>Date.now())){e(d({key:n}));try{var i,l,u,f,b,v,y,h,_=yield Object(c.h)({geoid:a});e(Object(o.d)({events:[...(null===(i=_.top)||void 0===i?void 0:i.prefetchItems)||[],...(null===(l=_.cinema)||void 0===l?void 0:l.prefetchItems)||[],...(null===(u=_.concert)||void 0===u?void 0:u.prefetchItems)||[],...(null===(f=_.theatre)||void 0===f?void 0:f.prefetchItems)||[]]})),(null===(b=_.top)||void 0===b?void 0:b.prefetchItems)&&delete _.top.prefetchItems,(null===(v=_.cinema)||void 0===v?void 0:v.prefetchItems)&&delete _.cinema.prefetchItems,(null===(y=_.concert)||void 0===y?void 0:y.prefetchItems)&&delete _.concert.prefetchItems,(null===(h=_.theatre)||void 0===h?void 0:h.prefetchItems)&&delete _.theatre.prefetchItems,e(m({key:n,data:_}))}catch(g){console.error(g),e(p({key:n,error:g}))}}}));return function(t,a){return e.apply(this,arguments)}}(),y=Object(s.b)("recommended-events",{stateReconciler:s.e,transforms:[Object(s.c)(l.ui)]});t.a=Object(i.b)(y,u.reducer)},function(e,t,a){"use strict";var n=a(40),r=a(0),i=a.n(r),c=a(173),s=a.n(c),o=Object(r.forwardRef)((e,t)=>{var{className:a,type:r}=e,c=Object(n.a)(e,["className","type"]),o=[s.a.input,a].filter(Boolean).join(" ");return i.a.createElement("input",Object.assign({ref:t,type:r||"text",className:o},c))});t.a=o},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a(2),r={timeout:1e4,maximumAge:36e5};function i(){return c.apply(this,arguments)}function c(){return(c=Object(n.a)((function*(){return new Promise((e,t)=>{window.navigator.geolocation.getCurrentPosition(t=>e(t.coords),t,r)})}))).apply(this,arguments)}function s(e){return e*(Math.PI/180)}function o(e,t,a,n){var r=Math.sin(s(a-e)/2)*Math.sin(s(a-e)/2)+Math.cos(s(e))*Math.cos(s(a))*Math.sin(s(n-t)/2)*Math.sin(s(n-t)/2);return 12742*Math.asin(Math.sqrt(r))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(59),c=a(49),s=a(81),o=a.n(s),l=({fill:e="white"})=>{var t=[o.a["backward-icon"],o.a["icon-".concat(e)]].join(" ");return r.a.createElement("span",{className:t})};t.a=e=>{var t=Object(c.a)();return r.a.createElement(i.a,{className:[o.a["backward-button"],e.className].filter(Boolean).join(" "),onClick:t},r.a.createElement(l,{fill:e.fill}))}},function(e,t,a){e.exports={"backward-icon":"styles_backward-icon__3EK-Q","icon-white":"styles_icon-white__30Xrl","icon-black":"styles_icon-black__1FNaZ","backward-button":"styles_backward-button__d5kZC"}},function(e,t,a){e.exports={content:"styles_content__2Cnjx",title:"styles_title__XAM43"}},function(e,t,a){e.exports={container:"styles_container__2LqZR",image:"styles_image__9Aiab",username:"styles_username__MPrq4"}},,,,,,,,,,,,,function(e,t,a){"use strict";function n(e){var t,a,n,r=null===(t=e.tickets)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.price)||void 0===n?void 0:n.min;return{id:e.id,name:e.title,category:e.type.name,price:r?r/100:void 0}}function r(e){var t,a,n;return null===(t=e.tickets)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.price)||void 0===n?void 0:n.currency.toUpperCase()}function i(e){window.dataLayer.push({ecommerce:{currencyCode:r(e),detail:{products:[n(e)]}}})}function c(e){window.dataLayer.push({ecommerce:{currencyCode:r(e),add:{products:[n(e)]}}})}function s(e,t){window.dataLayer.push({ecommerce:{currencyCode:r(e),purchase:{actionField:{id:t.toString()},products:[n(e)]}}})}a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}))},,,function(e,t,a){e.exports={loading:"styles_loading__l2xXc",rect:"styles_rect__39Mf0",text:"styles_text__O_35F"}},function(e,t,a){e.exports={block:"styles_block__fQZVR",filter:"styles_filter__2Vym1"}},function(e,t,a){e.exports={block:"styles_block__10trK",item:"styles_item__2uVU7"}},function(e,t,a){e.exports={content:"styles_content__3nFVw",title:"styles_title__2inpl"}},function(e,t,a){e.exports={list:"style_list__3pVg_",wrapper:"style_wrapper__IWliN",button:"style_button__2GIxG"}},function(e,t,a){e.exports={price:"styles_price__1D8ax",left:"styles_left__3RisO",right:"styles_right__3KXqq"}},function(e,t,a){e.exports={title:"styles_title__3XLML",notFound:"styles_notFound__2R52E"}},function(e,t,a){e.exports={title:"styles_title__3xg9O",event:"styles_event__3FTWc"}},function(e,t,a){e.exports={header:"styles_header__2L4R0",content:"styles_content__1NmrT"}},function(e,t,a){e.exports={container:"styles_container__2CjIh",button:"styles_button__1zNzf"}},function(e,t,a){e.exports={wrapper:"styles_wrapper__15WSd",select:"styles_select__1BaqC"}},function(e,t,a){e.exports={checkbox:"styles_checkbox__3iL51",label:"styles_label__3hGrm"}},function(e,t,a){e.exports={action:"styles_action__13iH4",invalid:"styles_invalid__1yKSC"}},function(e,t,a){e.exports={"city-modal":"styles_city-modal__1AgdR","city-modal-visible_yes":"styles_city-modal-visible_yes__3Ub-H",fadeIn:"styles_fadeIn__26BAg","city-modal-visible_no":"styles_city-modal-visible_no__1NmRJ",fadeOut:"styles_fadeOut__1X9f5"}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a(71),i=a(18);function c(e){var t=Object(r.c)();Object(n.useEffect)(()=>{t&&Object(i.b)(window.location.href,{params:e})},[t,e])}},function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(8),r=a(115),i={date:Object(r.a)(new Date).toString(),period:1},c=Object(n.c)({name:"date-filter",initialState:i,reducers:{setDate(e,t){e.date=t.payload.date,e.period=t.payload.period||1}}}),{setDate:s}=c.actions;t.a=c.reducer},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(54),r=e=>Object(n.format)(e,"YYYY-MM-DD").toString(),i=e=>Object(n.parse)(e)},function(e,t,a){"use strict";var n=a(0),r=a.n(n);function i({threshold:e,ref:t,isLoading:a,loadMore:r,hasMore:i}){var c=function(e,t){var[a,r]=Object(n.useState)(),i=Object(n.useRef)(t);return Object(n.useLayoutEffect)(()=>{if(e.current){i.current,0;var a=new IntersectionObserver(([e])=>{r(e.isIntersecting)},t);return a.observe(e.current),()=>{a.disconnect()}}},[e,t]),a}(t,Object(n.useMemo)(()=>({rootMargin:"0px 0px ".concat(e||0,"px 0px")}),[e]))||!1;Object(n.useEffect)(()=>{i&&(a||c&&r())},[c,r,i,a])}var c=a(61),s=a(103),o=a.n(s),l=e=>{var{itemsGap:t=c.a}=e,a=Object(n.useRef)(null),[s,l,d]=function(e){var{items:t,hasMore:a,loadMore:r,pageSize:i}=e,[c,s]=Object(n.useState)(i),o=Object(n.useMemo)(()=>t.slice(0,c),[t,c]),l=Object(n.useCallback)(()=>{t.length>c?s(c+i):r()},[r,c,i,t]);return[o,a||c<t.length,l]}({items:e.items,hasMore:e.hasMore,loadMore:e.loadMore,pageSize:e.pageSize});return i({ref:a,isLoading:e.isLoadingMore,hasMore:l,loadMore:d,threshold:200}),r.a.createElement("div",{className:o.a.list,style:{gridGap:"".concat(t,"px")}},r.a.createElement(u,Object.assign({},e,{items:s})),e.isLoadingMore&&e.skeleton,r.a.createElement("div",{ref:a}))},u=e=>r.a.createElement(r.a.Fragment,null,e.items.map((t,a)=>t?r.a.createElement(e.component,{key:a,event:t,onClick:e.onItemClick}):null));t.a=e=>{var{itemsGap:t=c.a}=e;return"loadable"===e.type?r.a.createElement(l,e):r.a.createElement("div",{className:o.a.list,style:{gridGap:"".concat(t,"px")}},r.a.createElement(u,e))}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(20),c=a(25),s=a(65),o=a(118),l=a(36),u=a.n(l);t.a=Object(n.memo)(e=>{var{id:t,title:a,argument:n,image:l,tickets:d}=e.event.eventPreview,m=d&&d[0];return r.a.createElement(i.b,{to:Object(c.a)(t),className:u.a.card,onClick:e.onClick},r.a.createElement("div",{className:u.a["image-wrapper"]},l&&l.eventListCard?r.a.createElement(s.a,{className:u.a.image,alt:a,src:l.eventListCard,src2x:l.eventListCard2x,bgColor:l.bgColor}):r.a.createElement("div",{className:u.a.preview}),m&&r.a.createElement(o.a,{ticket:m,position:"left"}),l&&r.a.createElement("div",{className:u.a["image-overlay"]})),r.a.createElement("div",{className:u.a.description},r.a.createElement("div",{className:u.a.title},a),r.a.createElement("div",{className:u.a.annotation},n)))})},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(119),c=a(104),s=a.n(c);t.a=e=>r.a.createElement("div",{className:[s.a.price,s.a[e.position||"left"]].join(" ")},r.a.createElement(i.a,{ticket:e.ticket}))},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(160),c="\xa0";t.a=({ticket:e,exact:t})=>{if(!e.price||!e.price.min)return null;var a=[t?"":"\u043e\u0442".concat(c),(e.price.min||0)/100,c,Object(i.a)(e.price.currency)].filter(Boolean).join(c);return r.a.createElement(r.a.Fragment,null,a)}},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(111),c=a.n(i),s=Object(n.forwardRef)(({type:e,className:t,disabled:a,formInvalid:n,children:i,onClick:s},o)=>{var l=[c.a.action,t,n&&c.a.invalid].filter(Boolean).join(" ");return r.a.createElement("button",{ref:o,type:e,className:l,onClick:s,disabled:a},i)});t.a=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(6),c=a(172),s=a.n(c);t.a=()=>r.a.createElement(i.a,{className:s.a.card})},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(6),c=a(101),s=a.n(c);t.a=({className:e})=>r.a.createElement("div",{className:[s.a.block,e].filter(Boolean).join(" ")},Array(5).fill(0).map((e,t)=>r.a.createElement(i.a,{key:t,className:s.a.item})))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n={rub:"\u20bd",usd:"$"};function r(e){return n[e]}},,function(e,t,a){"use strict";var n,r=a(2),i=a(8),c=a(7),s=a(27);function o(e){return l.apply(this,arguments)}function l(){return(l=Object(r.a)((function*(e){try{var t,a;return yield Object(s.a)({name:"window.yandex.autofill.getProfileData",args:[e],scope:null===(t=window)||void 0===t||null===(a=t.yandex)||void 0===a?void 0:a.autofill,method:"getProfileData"})}catch(r){var{code:n}=r;if("denied"===n)throw new c.a(c.b.JsApiDenied,"Autofill denied.");throw r}}))).apply(this,arguments)}!function(e){e.Name="name",e.Email="email",e.Phone="phone",e.Address="address"}(n||(n={}));var u=new Promise((e,t)=>{var a,n,r;if(null===(a=window.yandex)||void 0===a||null===(n=a.autofill)||void 0===n?void 0:n.getProfileData)return e();var i=document.createElement("script"),c=document.getElementsByTagName("script")[0];i.src="https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-latest.js",i.async=!0,i.onload=()=>e(),i.onerror=()=>t(),null===(r=c.parentNode)||void 0===r||r.insertBefore(i,c)});function d(){return(d=Object(r.a)((function*(){return yield u,o([n.Name,n.Phone,n.Email,n.Address])}))).apply(this,arguments)}a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return v}));var m=Object(i.c)({name:"autofill",initialState:{},reducers:{setAutofilledUser(e,t){e.user=t.payload}}}),{setAutofilledUser:p}=m.actions,f=e=>Boolean(e.autofill.user),b=e=>e.autofill.user,v=()=>function(){var e=Object(r.a)((function*(e){try{var{email:t,lastName:a,firstName:n,middleName:r,phoneNumber:i,streetAddress:s}=yield function(){return d.apply(this,arguments)}(),o=[a,n,r].filter(Boolean).join(" ");e(p({name:o,phone:i,email:t,address:s}))}catch(u){var{code:l}=u;if([c.b.JsApiDenied,c.b.JsApiMethodNotAvailable].includes(l))return console.warn(u);console.error(u)}}));return function(t){return e.apply(this,arguments)}}();t.c=m.reducer},function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(6),c=a(62),s=a.n(c),o=()=>r.a.createElement("div",{className:s.a.card},r.a.createElement(i.a,{className:s.a.image}),r.a.createElement(i.b,{className:s.a.title}),r.a.createElement(i.b,{className:s.a.description})),l=a(47),u=a.n(l),d=()=>r.a.createElement("div",{className:u.a.feed},r.a.createElement(i.b,{className:u.a.title}),r.a.createElement("div",{className:u.a.events},r.a.createElement("div",{className:u.a.item},r.a.createElement(o,null)),r.a.createElement("div",{className:u.a.item},r.a.createElement(o,null)),r.a.createElement("div",{className:u.a.item},r.a.createElement(o,null))));t.a=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement(d,null),r.a.createElement(d,null),r.a.createElement(d,null))},,,,,,function(e,t,a){e.exports={clear:"styles_clear__ZHIHN"}},,function(e,t,a){e.exports={events:"styles_events__3RaZ8"}},function(e,t,a){e.exports={card:"styles_card__1j4tU"}},function(e,t,a){e.exports={input:"styles_input__2gjR5"}},function(e,t,a){e.exports={input:"styles_input__1gPFI"}},function(e,t,a){e.exports={title:"styles_title__354Bd"}},,function(e,t,a){e.exports=a(291)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(48),c=a.n(i),s=a(3),o=a(20),l=a(165),u=a(18),d=a(19),m=a(8),p=a(10),f=a(46),b=a(16),v=a(162),y=a(74),h=a(75),_=a(50),g=a(76),j=a(2),O=a(11),E=a(79),w=a(4),k=a(32),C={useGeolocation:!0,isFetchingLocation:!1,currentCity:O.a},N=Object(m.c)({name:"city",initialState:C,reducers:{setCity(e,t){e.currentCity=t.payload},setGeolocation(e,t){e.useGeolocation=t.payload},locationFetchStart(e){e.isFetchingLocation=!0},locationFetchSuccess(e){e.isFetchingLocation=!1},locationFetchFailed(e,t){e.isFetchingLocation=!1,e.useGeolocation=!1,t.payload&&alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e!")}}}),{setCity:A,setGeolocation:x,locationFetchStart:S,locationFetchSuccess:L,locationFetchFailed:I}=N.actions,M=e=>function(){var t=Object(j.a)((function*(t){t(S());try{var a=yield Object(E.a)(),n={longitude:a.longitude,latitude:a.latitude},{cityInfo:r}=yield Object(O.d)(n);t(A({name:r.name,geoid:r.geoid,longitude:r.longitude,latitude:r.latitude})),t(Object(k.b)(r.eventsMenu)),t(L())}catch(i){console.error(i),t(I(e))}}));return function(e){return t.apply(this,arguments)}}(),P=()=>function(){var e=Object(j.a)((function*(e,t){var a=t().city;try{if(a.useGeolocation)return void e(M(!1));var{cityInfo:n}=yield Object(O.d)({longitude:a.currentCity.longitude,latitude:a.currentCity.latitude});e(Object(k.b)(n.eventsMenu))}catch(r){console.error(r)}}));return function(t,a){return e.apply(this,arguments)}}(),R=e=>function(){var t=Object(j.a)((function*(t){e&&t(M(!0)),t(x(e))}));return function(e){return t.apply(this,arguments)}}(),U=Object(w.b)("city"),T=Object(p.b)(U,N.reducer),D=Object(m.c)({name:"city-list",initialState:{isLoading:!1,items:[]},reducers:{setLoading(e,t){e.isLoading=t.payload},setCityListResult(e,t){e.items=t.payload}}}),{setLoading:F,setCityListResult:B}=D.actions,J=()=>function(){var e=Object(j.a)((function*(e){e(F(!0));try{var{cities:t}=yield Object(O.e)();e(B(t))}catch(a){console.error(a)}e(F(!1))}));return function(t){return e.apply(this,arguments)}}(),z=Object(w.b)("city-list",{blacklist:["isLoading"]}),G=Object(p.b)(z,D.reducer),V=a(40),q=a(5),H={data:{results:{groups:[]},popularEvents:{events:[],updatedAt:0}},ui:{popularEvents:{isLoading:!1,isUpdating:!1},results:{isLoading:!1}}},X=Object(m.c)({name:"search",initialState:H,reducers:{fetchPopularStart(e){e.data.popularEvents.events.length>0?e.ui.popularEvents.isUpdating=!0:e.ui.popularEvents.isLoading=!0},fetchPopularSuccess(e,t){e.data.popularEvents.events=t.payload,e.data.popularEvents.updatedAt=Date.now(),e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},fetchPopularError(e){e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},searchStart(e){e.ui.results.isLoading=!0,e.data.results.groups=[]},searchSuccess(e,t){e.ui.results.isLoading=!1,e.data.results.groups=t.payload.map(e=>({code:e.code,title:e.title,events:e.documents.map(e=>function(e){var{id:t,title:a,argument:n,image:r,type:i,minPrice:c}=e.object;return{eventPreview:{id:t,title:a,argument:n,image:r,type:i,tags:[],contentRating:null,tickets:c?[{id:null,price:{min:c.value,currency:c.currency,max:null}}]:[],userRating:null},scheduleInfo:{placesTotal:null,preview:null}}}(e))}))},searchError(e){e.ui.results.isLoading=!1},resetResults(e){e.data.results.groups.length>0&&(e.data.results.groups=[])}}}),{fetchPopularStart:Z,fetchPopularSuccess:K,fetchPopularError:Q,searchStart:Y,searchSuccess:W,searchError:$,resetResults:ee}=X.actions,te=()=>function(){var e=Object(j.a)((function*(e,t){var a=t().search.data.popularEvents;if(!(a&&a.updatedAt+9e5>Date.now())){e(Z());try{var{geoid:n}=t().city.currentCity,r=yield Object(O.c)({limit:15,geoid:n});e(K(r.events.items))}catch(i){console.error(i),e(Q())}}}));return function(t,a){return e.apply(this,arguments)}}(),ae=null;var ne=e=>function(){var t=Object(j.a)((function*(t,a){ae&&ae.abort(),ae=new AbortController,a().search.ui.results.isLoading||t(Y());try{var{geoid:n}=a().city.currentCity,{suggest:{groups:r}}=yield Object(O.l)(e,n,ae.signal);t(W(function(e,t){return t.map(t=>Object(q.a)(Object(q.a)({},t),{},{documents:t.documents.filter(({object:t})=>t.title.toLowerCase().includes(e.trim().toLowerCase()))})).filter(e=>e.documents.length)}(e,r))),ae=null}catch(i){if("AbortError"===i.name)return;console.error(i),t($())}}));return function(e,a){return t.apply(this,arguments)}}(),re=Object(w.b)("search",{transforms:[Object(p.a)((e,t)=>{if("data"===t){var a=e,{results:n}=a,r=Object(V.a)(a,["results"]);return Object(q.a)(Object(q.a)({},r),{},{results:{groups:[]}})}return e}),Object(w.c)(H.ui)]}),ie=Object(p.b)(re,X.reducer);var ce=a(114),se=a(77),oe=a(12),le=a(24),ue=[f.FLUSH,f.REHYDRATE,f.PAUSE,f.PERSIST,f.PURGE,f.REGISTER],de=Object(d.combineReducers)({event:b.a,autofill:v.c,actualEvents:y.c,rubricEvents:h.a,selections:_.a,selectionEvents:g.a,city:T,cityList:G,search:ie,menu:k.a,dateFilter:ce.a,recommendedEvents:se.a,user:oe.d,order:le.e}),me=Object(m.a)({reducer:de,middleware:Object(m.d)({serializableCheck:{ignoredActions:ue}})}),pe=Object(p.c)(me),fe=me,be=a(38);var ve=a(26),ye=a(39),he=a(6),_e=a(100),ge=a.n(_e),je=()=>r.a.createElement("div",{className:ge.a.block},Array(2).fill(0).map((e,t)=>r.a.createElement(he.a,{key:t,className:ge.a.filter}))),Oe=a(37),Ee=a(158),we=a(159),ke=a(82),Ce=a.n(ke),Ne=()=>r.a.createElement("div",null,r.a.createElement(je,null),r.a.createElement("div",{className:Ce.a.content},r.a.createElement(he.b,{className:Ce.a.title}),r.a.createElement(Oe.a,{itemsGap:8,count:5,card:Ee.a}),r.a.createElement(he.b,{className:Ce.a.title}),r.a.createElement(we.a,null))),Ae=Object(ve.a)(()=>a.e(2).then(a.bind(null,338))),xe=()=>{var e=Object(s.b)(),t=Object(s.c)(e=>e.dateFilter),{geoid:a}=Object(s.c)(e=>e.city.currentCity);return Object(n.useEffect)(()=>{e(Object(y.d)(t,a)),e(Object(_.c)(t,a))},[e,t,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(n.Suspense,{fallback:r.a.createElement(Ne,null)},r.a.createElement(Ae,null)))},Se=a(163),Le=a(15),Ie=a.n(Le),Me=()=>r.a.createElement("div",{className:Ie.a.container},r.a.createElement("div",{className:Ie.a.image}),r.a.createElement("div",{className:Ie.a["button-wrapper"]},r.a.createElement(he.a,{className:Ie.a.button})),r.a.createElement(he.b,{className:Ie.a["date-1"]}),r.a.createElement(he.b,{className:Ie.a["date-2"]}),r.a.createElement(he.a,{className:Ie.a.map}),r.a.createElement(he.b,{className:Ie.a["place-1"]}),r.a.createElement(he.b,{className:Ie.a["place-2"]}),r.a.createElement("div",{className:Ie.a.gallery},r.a.createElement(he.b,{className:Ie.a["gallery-header"]}),r.a.createElement("div",{className:Ie.a["gallery-content"]},r.a.createElement(he.a,{className:Ie.a["gallery-card"]}),r.a.createElement(he.a,{className:Ie.a["gallery-card"]}),r.a.createElement(he.a,{className:Ie.a["gallery-card"]}))),r.a.createElement("div",{className:Ie.a.description},Array(5).fill(0).map((e,t)=>r.a.createElement(he.b,{key:t,className:Ie.a["description-line-".concat(t+1)]}))),r.a.createElement("div",{className:Ie.a.recommended},r.a.createElement(Se.a,null))),Pe=Object(ve.a)(()=>a.e(0).then(a.bind(null,337))),Re=({id:e})=>{var t=Object(s.b)();return Object(n.useEffect)(()=>{t(Object(b.c)(e)),t(Object(se.b)())},[t,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(Me,null)},r.a.createElement(Pe,{id:e,skeleton:r.a.createElement(Me,null)})))},Ue=a(70),Te=a(102),De=a.n(Te),Fe=()=>r.a.createElement("div",null,r.a.createElement(je,null),r.a.createElement("div",{className:De.a.content},r.a.createElement(he.b,{className:De.a.title}),r.a.createElement(Oe.a,{count:10,card:Ue.a}))),Be=Object(ve.a)(()=>a.e(5).then(a.bind(null,334))),Je=({code:e})=>{var t=Object(s.b)(),a=Object(s.c)(e=>e.dateFilter);return Object(n.useEffect)(()=>{t(Object(h.c)(e,a))},[t,e,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(n.Suspense,{fallback:r.a.createElement(Fe,null)},r.a.createElement(Be,{code:e})))},ze=Object(ve.a)(()=>a.e(7).then(a.bind(null,335))),Ge=({code:e})=>{var t=Object(s.b)(),a=Object(s.c)(e=>e.dateFilter);return Object(n.useEffect)(()=>{t(Object(g.c)(e,a))},[t,e,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(n.Suspense,{fallback:r.a.createElement(Fe,null)},r.a.createElement(ze,{code:e})))},Ve=a(161),qe=a(80),He=a(113),Xe=a(78),Ze=a(174),Ke=a.n(Ze),Qe=e=>{var t=Object(n.useRef)(null),[a,i]=Object(n.useState)(""),c=Object(n.useCallback)(t=>{var{value:a}=t.target;e.onChange(a),i(a)},[i,e]);return Object(n.useEffect)(()=>{t.current&&t.current.focus()},[t]),r.a.createElement(Xe.a,{ref:t,className:Ke.a.input,defaultValue:a,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c",onChange:c})},Ye=a(116),We=a(117);var $e=a(175),et=a.n($e),tt=()=>r.a.createElement(r.a.Fragment,null,Array(3).fill(0).map((e,t)=>r.a.createElement("div",{key:t},r.a.createElement(he.b,{className:et.a.title}),r.a.createElement(Oe.a,{count:3,card:Ue.a})))),at=a(105),nt=a.n(at),rt=({onItemClick:e})=>{var{groups:t}=Object(s.c)(e=>e.search.data.results),{isLoading:a}=Object(s.c)(e=>e.search.ui.results),i=function(e,t){var[a,r]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{if(e){var a=window.setTimeout(()=>r(!0),t);return()=>clearTimeout(a)}r(!1)},[e,t]),a}(a,250);return i?r.a.createElement(tt,null):0!==t.length||a||i?r.a.createElement(r.a.Fragment,null,t.map(({code:t,title:a,events:n})=>r.a.createElement("section",{key:t},r.a.createElement("h2",{className:nt.a.title},a),r.a.createElement(Ye.a,{items:n,component:We.a,onItemClick:e})))):r.a.createElement("div",{className:nt.a.notFound},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")},it=a(25),ct=a(106),st=a.n(ct),ot=({showTitle:e})=>r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(he.b,{className:st.a.title}),r.a.createElement("div",null,Array(15).fill(0).map((e,t)=>r.a.createElement(he.b,{className:st.a.event,key:t})))),lt=a(64),ut=a.n(lt),dt=({onLinkClick:e})=>{var{events:t}=Object(s.c)(e=>e.search.data.popularEvents),{isLoading:a}=Object(s.c)(e=>e.search.ui.popularEvents);return r.a.createElement("section",null,r.a.createElement("div",{className:ut.a.title},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b"),a&&r.a.createElement(ot,null),r.a.createElement("ul",{className:ut.a.events},t.map((t,a)=>{if(!t)return null;var{id:n,title:i}=t.eventPreview;return r.a.createElement("li",{key:a,className:ut.a.event},r.a.createElement(o.b,{onClick:e,className:ut.a.link,to:Object(it.a)(n)},i))})))},mt=a(107),pt=a.n(mt),ft=()=>{var[e,t]=Object(n.useState)(!1),a=Object(s.b)();Object(n.useEffect)(()=>{a(te())},[a]),Object(He.a)();var i=Object(n.useMemo)(()=>Object(Ve.a)(500,e=>{e=e.trim(),t(Boolean(e)),a(e?ne(e):ee())}),[a]),c=Object(n.useCallback)(()=>{a(ee())},[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:pt.a.header},r.a.createElement(qe.a,{fill:"black"}),r.a.createElement(Qe,{onChange:i})),r.a.createElement("div",{className:pt.a.content},e?r.a.createElement(rt,{onItemClick:c}):r.a.createElement(dt,{onLinkClick:c})))},bt=a(29),vt=a.n(bt),yt=()=>r.a.createElement("div",{className:vt.a.card},r.a.createElement(he.a,{className:vt.a.image}),r.a.createElement("div",{className:vt.a.content},r.a.createElement(he.b,{size:20,className:vt.a.text}),r.a.createElement(he.b,{size:16,className:vt.a.short}),r.a.createElement(he.b,{size:16,className:vt.a.short})),r.a.createElement("div",{className:vt.a.right},r.a.createElement(he.b,{size:20,className:vt.a.short}),r.a.createElement(he.b,{size:16,className:vt.a.text}))),ht=()=>r.a.createElement(Oe.a,{count:10,card:yt}),_t=Object(ve.a)(()=>a.e(3).then(a.bind(null,340))),gt=()=>{var e=Object(s.b)(),t=Object(s.c)(le.h),a=r.a.createElement(ht,null);return Object(n.useEffect)(()=>{e(Object(le.f)())},[e]),Object(n.useEffect)(()=>{t.forEach(t=>{e(Object(b.c)(t))})},[t,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{backward:"black",hasLogo:!1,hasMenu:!1,text:"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"}),r.a.createElement(n.Suspense,{fallback:a},r.a.createElement(_t,{skeleton:a})))},jt=a(41),Ot=a.n(jt),Et=e=>{var{text:t,to:a,onItemClick:n}=e;return r.a.createElement("li",{className:Ot.a.item},r.a.createElement(o.c,{exact:!0,onClick:n,className:Ot.a.link,activeClassName:Ot.a["active-item"],to:a},t))},wt=e=>{var t=Object(s.c)(oe.e),a=Object(s.c)(le.j);return r.a.createElement("ul",{className:Ot.a.list},t&&r.a.createElement("li",{className:Ot.a.item},r.a.createElement(o.c,{exact:!0,onClick:e.onItemClick,className:[Ot.a.link,Ot.a["orders-text"]].join(" "),to:Object(it.c)()},"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"),a.length>0&&r.a.createElement("span",null,a.length)),r.a.createElement(Et,{to:"/",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",onItemClick:e.onItemClick}),e.tags.map(t=>r.a.createElement(Et,{key:t.code,to:Object(it.d)(t.code),text:t.name,onItemClick:e.onItemClick})))},kt=a(65),Ct=a(108),Nt=a.n(Ct),At=()=>{var e=Object(s.b)(),t=Object(n.useCallback)(()=>{e(Object(oe.h)())},[e]);return r.a.createElement("div",{className:Nt.a.container,onClick:t},r.a.createElement("button",{className:Nt.a.button},"\u0412\u043e\u0439\u0442\u0438"))},xt=a(83),St=a.n(xt),Lt=e=>({url:"https://avatars.yandex.net/get-yapic/".concat(e,"/islands-middle"),width:42,height:42}),It=e=>({url:"https://avatars.yandex.net/get-yapic/".concat(e,"/islands-retina-middle"),width:84,height:84}),Mt=()=>{var e=Object(s.b)(),t=Object(s.c)(oe.l),a=Object(s.c)(oe.e),i=Object(s.c)(oe.f),c=Object(n.useCallback)(()=>{i||e(Object(oe.b)())},[e,i]);if(!a)return r.a.createElement(At,null);var o=t.display_name||"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",l=t.avatar_id||"default";return r.a.createElement("div",{className:St.a.container,onClick:c},r.a.createElement(kt.a,{className:St.a.image,alt:o,src:Lt(l),src2x:It(l)}),r.a.createElement("div",{className:St.a.username},o))},Pt=a(109),Rt=a.n(Pt),Ut=({setCityModalVisibleCallback:e})=>{var t=Object(s.c)(e=>e.city.currentCity),a=Object(n.useCallback)(()=>{e(!0)},[e]);return r.a.createElement("div",{className:Rt.a.wrapper},r.a.createElement("div",{className:Rt.a.select,onClick:a},t?t.name:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"))},Tt=a(30),Dt=a.n(Tt),Ft=({setCityModalVisibleCallback:e})=>{var t=Object(s.b)(),{visible:a,items:i}=Object(s.c)(e=>e.menu),c=Object(s.c)(oe.e),o=Object(s.c)(oe.k),l=Object(n.useCallback)(()=>{e(!1),t(Object(k.c)(!1))},[t,e]),u=Object(n.useCallback)(e=>{e.stopPropagation()},[]),d=Object(n.useCallback)(()=>{t(Object(oe.i)())},[t]),m=[Dt.a.modal,a?Dt.a.visible:Dt.a.hidden].join(" ");return r.a.createElement("div",{className:m,onClick:l},r.a.createElement("div",{className:Dt.a.content,onClick:u},r.a.createElement("div",{className:Dt.a.body},r.a.createElement("div",{className:Dt.a.profile},r.a.createElement(Mt,null)),r.a.createElement(Ut,{setCityModalVisibleCallback:e}),r.a.createElement(wt,{tags:i,onItemClick:l})),c&&r.a.createElement("div",{className:Dt.a.footer},o&&r.a.createElement("p",{className:Dt.a.psuid},"PSUID: ",o),r.a.createElement("div",{className:Dt.a.logout,onClick:d},"\u0412\u044b\u0439\u0442\u0438"))))},Bt=a(34),Jt=a(296);var zt=a(110),Gt=a.n(zt),Vt=e=>{var{className:t,label:a}=e,n=Object(V.a)(e,["className","label"]),i=[Gt.a.checkbox,t].filter(Boolean).join(" ");return r.a.createElement("label",{className:Gt.a.label},r.a.createElement("input",Object.assign({type:"checkbox",className:i},n)),a)},qt=a(120),Ht=a(31),Xt=a.n(Ht),Zt=({visible:e,openCityModal:t,wasClosed:a,onSaveClick:n,useGeolocation:i,onGeolocationChanged:c,selectedCity:o})=>{var l=Object(s.c)(e=>e.city.isFetchingLocation),u=[Xt.a.wrapper,e||a?Xt.a["wrapper-visible_".concat(e?"yes":"no")]:"",l&&Xt.a.wrapper_loading].join(" ");return r.a.createElement("div",{className:u},r.a.createElement("div",{className:Xt.a.title},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"),r.a.createElement("div",{className:Xt.a["auto-select-box"]},r.a.createElement(Vt,{checked:i,onChange:c,label:"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"})),r.a.createElement("div",{className:Xt.a.selected},r.a.createElement("div",{className:Xt.a["selected-city-label"]},"\u0413\u043e\u0440\u043e\u0434"),r.a.createElement("div",{className:Xt.a["selected-city-name"],onClick:t},o.name)),r.a.createElement(qt.a,{className:Xt.a.button,onClick:n},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},Kt=a(53),Qt=a.n(Kt),Yt=e=>{var{city:t,onCityClick:a}=e,i=Object(n.useCallback)(()=>{a(t)},[a,t]);return r.a.createElement("li",{className:Qt.a["city-item"],onClick:i},t.name)},Wt=e=>{var{isLoading:t,items:a,onCityClick:n}=e;return t?r.a.createElement(r.a.Fragment,null,"loading..."):r.a.createElement("ul",{className:Qt.a["city-list"]},a.map(e=>e?r.a.createElement(Yt,{key:e.geoid,city:e,onCityClick:n}):null))},$t=({visible:e,onCitySelect:t,wasClosed:a})=>{var i=Object(s.b)(),{items:c,isLoading:o}=Object(s.c)(e=>e.cityList),[l,u]=Object(n.useState)(c),d=[Qt.a.wrapper,e||a?Qt.a["wrapper-visible_".concat(e?"yes":"no")]:""].join(" ");Object(n.useEffect)(()=>{c.length?u(c):i(J())},[i,c]);var m=Object(n.useCallback)(e=>{var t=e.target.value.toLowerCase();t.trim()?u(c.filter(({name:e})=>-1!==e.toLowerCase().indexOf(t))):u(c)},[c]);return r.a.createElement("div",{className:d},r.a.createElement(Xe.a,{className:Qt.a.input,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:m}),r.a.createElement(Wt,{isLoading:o,items:l,onCityClick:t}))},ea=a(112),ta=a.n(ea),aa=({visible:e,setCityModalVisibleCallback:t})=>{var a=Object(n.useRef)(null),i=Object(s.b)(),c=Object(Bt.d)(),o=Object(s.c)(e=>e.city.currentCity),l=Object(s.c)(e=>e.city.useGeolocation),u=function(e){var t=Object(n.useRef)();return Object(n.useEffect)(()=>{t.current=e},[e]),t.current}(o),[d,m]=Object(n.useState)(o),[p,f]=Object(n.useState)(!1),[b,v]=Object(n.useState)(!1),[y,h]=Object(n.useState)(!1),[_,g]=Object(n.useState)(!1),[j,O]=Object(n.useState)(!1),E=[ta.a["city-modal"],e||p?ta.a["city-modal-visible_".concat(e?"yes":"no")]:""].join(" ");Object(n.useEffect)(()=>{g(e)},[g,e]),Object(n.useEffect)(()=>{m(o),u&&u.name!==o.name&&(console.warn("Go to `/` route"),c.replace("/"))},[m,o,u,c]);var w=Object(n.useCallback)(e=>{var t=e.target.checked;i(R(t))},[i]),k=Object(n.useCallback)(()=>{d.name!==o.name&&m(o),f(!0),O(!1),g(!1),t(!1)},[d,o,m,f,O,g,t]),C=Object(n.useCallback)(()=>{f(!0),g(!1),t(!1),i(A(d)),d.name!==o.name&&i(P())},[g,t,i,d,o]),N=Object(n.useCallback)(e=>{m(e),h(!0),O(!1),g(!0),i(R(!1))},[i,m,h,O,g]),x=Object(n.useCallback)(()=>{v(!0),O(!0),g(!1)},[v,O,g]);return Object(Jt.a)(a,k),r.a.createElement("div",{className:E},e&&r.a.createElement("div",{ref:a},r.a.createElement(Zt,{visible:_,openCityModal:x,onGeolocationChanged:w,useGeolocation:l,wasClosed:b,selectedCity:d,onSaveClick:C}),r.a.createElement($t,{visible:j,onCitySelect:N,wasClosed:y})))},na=a(71),ra=Object(na.a)([{path:"/",exact:!0,component:Object(n.memo)(()=>r.a.createElement(xe,null))},{path:"/event/:id",exact:!0,component:Object(n.memo)(({params:{id:e}})=>r.a.createElement(Re,{id:e}))},{path:"/events/:code",exact:!0,component:Object(n.memo)(({params:{code:e}})=>r.a.createElement(Je,{code:e}))},{path:"/selection/:code",exact:!0,component:Object(n.memo)(({params:{code:e}})=>r.a.createElement(Ge,{code:e}))},{path:"/search",exact:!0,component:Object(n.memo)(()=>r.a.createElement(ft,null))},{path:"/orders",exact:!0,component:Object(n.memo)(()=>r.a.createElement(gt,null))},{path:"*",component:Object(n.memo)(()=>r.a.createElement("div",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))}],{maxDepth:10,transitions:!0}),ia=()=>{var e=Object(s.b)(),[t,a]=Object(n.useState)(!1),i=Object(n.useCallback)(e=>{a(e)},[a]);return Object(n.useEffect)(()=>{e(P())},[e]),Object(n.useEffect)(()=>{Object(be.a)()&&(document.body.style.overflow="auto")},[]),function(){var e=Object(s.b)();Object(n.useEffect)(()=>{e(Object(oe.c)())},[e]),Object(n.useEffect)(()=>{var t=()=>{"visible"===document.visibilityState&&e(Object(oe.c)())};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)},[e])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement(ra,null),r.a.createElement(Ft,{setCityModalVisibleCallback:i}),r.a.createElement(aa,{setCityModalVisibleCallback:i,visible:t}))},ca=[];"IntersectionObserver"in window||ca.push(a.e(10).then(a.t.bind(null,332,7))),"fetch"in window||ca.push(a.e(12).then(a.bind(null,333)));var sa=()=>{var[e,t]=Object(n.useState)(Boolean(!ca.length));return Object(n.useEffect)(()=>{ca.length&&Promise.all(ca).then(()=>t(!0))},[]),r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(ia,null))};a(290);Object(u.c)(),c.a.render(r.a.createElement(s.a,{store:fe},r.a.createElement(l.a,{loading:null,persistor:pe},r.a.createElement(o.a,null,r.a.createElement(sa,null)))),document.getElementById("root"))}],[[177,6,9]]]);
//# sourceMappingURL=main.9d6158b7.chunk.js.map