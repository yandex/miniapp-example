(this["webpackJsonpminiapp-example"]=this["webpackJsonpminiapp-example"]||[]).push([[1],[,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var a=n(6),r=n(13),c=n(60),i=n(178);function o(e){return JSON.stringify(e,Object.keys(e).sort())}function s(e){return JSON.parse(e)}function u(e){var t=new Date;t.setHours(0,0,0,0);var n=t.getTime();return Object.keys(e).filter((function(e){return"_persist"!==e})).reduce((function(t,a){return t[a]=Object.keys(e[a]).reduce((function(t,r){var i=s(r).date;if(!i)return t[r]=e[a][r],t;var o=Object(c.parse)(i).getTime();return n<=o&&(t[r]=e[a][r]),t}),{}),t}),{})}function l(e,t){return Object(a.a)(Object(a.a)({},t),{},{storage:Object(i.a)({name:"miniapp-example",storeName:"redux-persist"}),key:e,serialize:!1,deserialize:!1,version:7,migrate:function(e,t){var n=(e&&e._persist.version)===t?e:void 0;return Promise.resolve(n)},timeout:1e4})}function d(e){return Object(r.a)((function(t,n){return"ui"===n?e:t}))}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var a,r=n(176),c=n(177),i=n(187),o=n(188);!function(e){e.OauthAccessDenied="oauth_access_denied",e.OauthUnauthorizedClient="oauth_unauthorized_client",e.JsApiDenied="js_api_denied",e.JsApiCancelled="js_api_cancelled",e.JsApiAlreadyShown="js_api_already_shown",e.JsApiMethodNotAvailable="js_api_method_not_available"}(a||(a={}));var s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e,a){var c;return Object(r.a)(this,n),(c=t.call(this,a)).code=void 0,c.code=e,c.name="AppError",c}return n}(Object(o.a)(Error))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(0),r=n.n(a),c=n(109),i=n.n(c),o=function(e){var t=e.className,n=e.width,a=e.height;return r.a.createElement("div",{className:u(i.a.rect,t),style:{width:n,height:a}})},s=function(e){var t=e.className,n=e.width,a=e.size;return r.a.createElement("div",{className:u(i.a.text,t),style:{width:n,height:a}})};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}},,,,function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(43),i=n(6),o=n(3),s=n(90),u=n(9),l={retryCount:2,retryDelay:2e3};function d(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=Object(u.a)(e,2),a=n[0],r=n[1];if("undefined"!==typeof r)return Array.isArray(r)?r.forEach((function(e){return t.append(a,e)})):void t.append(a,r.toString())})),t.toString()}function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(t,n){var a,c,i,o,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.length>2&&void 0!==s[2]?s[2]:l,c=a.retryCount,i=a.retryDelay,o=0;case 3:if(!(o<=Math.max(c,0))){e.next=20;break}return e.prev=4,e.next=7,fetch(t,n);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),o!==c){e.next=14;break}throw e.t0;case 14:if(!i){e.next=17;break}return e.next=17,new Promise((function(e){return setTimeout(e,i)}));case 17:o++,e.next=3;break;case 20:return e.abrupt("return",Promise.reject("Unable to fetch. Check retryOptions values"));case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t,n);case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",a.json());case 5:return e.abrupt("return",Promise.reject(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,a){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t,n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("".concat(t).concat(n).concat(d(a)?"?".concat(d(a)):""),c));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("".concat(t).concat(n),Object(i.a)(Object(i.a)({},a),{},{method:"POST",headers:Object(i.a)(Object(i.a)({},a.headers),{},{"Content-Type":"application/json"})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return E})),n.d(t,"i",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"k",(function(){return x})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return A})),n.d(t,"j",(function(){return S})),n.d(t,"l",(function(){return L})),n.d(t,"h",(function(){return I})),n.d(t,"b",(function(){return R})),n.d(t,"n",(function(){return P})),n.d(t,"g",(function(){return U})),n.d(t,"m",(function(){return T}));var g={name:"\u041c\u043e\u0441\u043a\u0432\u0430",geoid:213,longitude:37.611347,latitude:55.760241},O=null!=="/miniapp-example"?"/miniapp-example":"",j=null!=="https://miniapp-api.tap.yandex.net"?"https://miniapp-api.tap.yandex.net":"";function E(e){return v(O,"/api/event/".concat(e,".json"))}function w(e,t){return v(O,"/api/rubric-events/".concat(e,".json"),t)}function k(e){return v(O,"/api/actual-events.json",e)}function x(e){return v(O,"/api/selections.json",e)}function C(e){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(r.a.mark((function e(t){var n,a,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return n=e.sent,a=n.cities.map((function(e){var n=Object(s.b)(t.latitude,t.longitude,e.latitude,e.longitude);return Object(i.a)(Object(i.a)({},e),{},{distance:n})})),o=1/0,u=a.reduce((function(e,t){var n=t.distance,a=Object(c.a)(t,["distance"]);return n<o?(o=n,a):e}),Object(i.a)(Object(i.a)({},g),{},{eventsMenu:[]})),e.abrupt("return",{cityInfo:u});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return v(O,"/api/city-list.json")}function S(e,t){return v(O,"/api/selection-events/".concat(e,".json"),t)}function L(e,t,n){return v(O,"/api/suggest.json",{text:e,geoid:t},{signal:n})}function I(e){return v(O,"/api/recommended-events.json",e)}function M(e){var t=e.jwtToken,n=e.oauthToken;return t?{Authorization:t}:n?{Authorization:"OAuth ".concat(n)}:void 0}function R(e,t){return y(j,"/payment",{body:JSON.stringify(e),headers:M(t)})}function P(e,t){return y(j,"/payment/user-info",{body:JSON.stringify(e),headers:M(t)})}function U(e){return v(j,"/payments",void 0,{headers:M(e)})}function T(e){return v(j,"/user-info",void 0,{headers:M({oauthToken:e})})}},,function(e,t,n){"use strict";var a,r,c=n(1),i=n.n(c),o=n(3),s=n(6),u=n(10),l=n(83),d=n(13),f=n(38),p=n(7),m=n(12),b=n(5),v=n(30);!function(e){e.NotLoggedIn="AuthErrorCode::ERROR_NOT_LOGGED_IN",e.AuthorizationDenied="AuthErrorCode::ERROR_AUTHORIZATION_DENIED",e.AuthorizationCancelled="AuthErrorCode::ERROR_AUTHORIZATION_CANCELLED"}(a||(a={})),function(e){e.Info="login:info",e.Email="login:email",e.Avatar="login:avatar"}(r||(r={}));var h,y="9e445c9aacec4266bf265302facb8293";function _(){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.a)({name:"window.yandex.app.auth.identify",args:[y],scope:null===(t=window)||void 0===t||null===(n=t.yandex)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.auth,method:"identify"});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.name!==a.NotLoggedIn){e.next=11;break}throw new p.a(p.b.JsApiCancelled,"User not logged.");case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function e(t){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.a)({name:"window.yandex.app.auth.authorize",args:[y,t],scope:null===(n=window)||void 0===n||null===(r=n.yandex)||void 0===r||null===(c=r.app)||void 0===c?void 0:c.auth,method:"authorize"});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),(o=e.t0.name)!==a.AuthorizationDenied){e.next=11;break}throw new p.a(p.b.JsApiDenied,"Authorization denied.");case 11:if(![a.NotLoggedIn,a.AuthorizationCancelled].includes(o)){e.next=13;break}throw new p.a(p.b.JsApiCancelled,"Authorization cancelled.");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function E(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.a)({name:"window.yandex.app.auth.getCurrentUserId",args:[y],scope:null===(t=window)||void 0===t||null===(n=t.yandex)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.auth,method:"getCurrentUserId"});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0.name!==a.NotLoggedIn){e.next=11;break}throw new p.a(p.b.JsApiCancelled,"User not logged.");case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(e){e.AccessDenied="access_denied",e.UnauthorizedClient="unauthorized_client"}(h||(h={}));var k=function(){var e=new URLSearchParams(window.location.hash.slice(1)),t=e.get("access_token"),n=e.get("error"),a=e.get("error_description");if(t||n){var r=new URL(window.location.href);r.hash="",window.history.replaceState(window.history.state,document.title,r.toString())}return{token:t,error:n,errorDescription:a}}();function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withError,n=k.token,a=k.error,r=k.errorDescription;if(a&&t){var c=r?decodeURIComponent(r):"unknown reason";switch(a){case h.AccessDenied:throw new p.a(p.b.OauthAccessDenied,"OAuth access denied: ".concat(c));case h.UnauthorizedClient:throw new p.a(p.b.OauthUnauthorizedClient,"OAuth unauthorized client: ".concat(c))}}return n}function C(){var e=new URLSearchParams;e.append("client_id",y),e.append("redirect_uri","".concat(window.location.origin).concat(window.location.pathname)),e.append("response_type","token"),window.location.href="https://oauth.yandex.ru/authorize?".concat(e.toString())}var N=n(27);n.d(t,"i",(function(){return R})),n.d(t,"k",(function(){return T})),n.d(t,"j",(function(){return D})),n.d(t,"g",(function(){return F})),n.d(t,"a",(function(){return B})),n.d(t,"f",(function(){return J})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return V})),n.d(t,"h",(function(){return H})),n.d(t,"d",(function(){return X}));var A={persist:{currentUser:{}},nonpersist:{}},S=Object(u.c)({name:"user",initialState:A,reducers:{authenticated:function(e,t){var n=t.payload;"psuid"in n?(e.persist.psuid=n.psuid,e.persist.jwtToken=n.jwtToken):e.persist.oauthToken=n.oauthToken,delete e.persist.loggedOutPsuid,delete e.nonpersist.isSessionLoggedOut},authorized:function(e,t){e.persist.currentUser=t.payload.user},logout:function(e){return{persist:Object(s.a)(Object(s.a)({},A.persist),{},{loggedOutPsuid:e.persist.psuid}),nonpersist:Object(s.a)(Object(s.a)({},A.nonpersist),{},{isSessionLoggedOut:!0})}}},extraReducers:function(e){e.addCase(f.a,(function(){return A}))}}),L=S.actions,I=L.authenticated,M=L.authorized,R=L.logout,P=function(e){return e.user.persist.oauthToken},U=function(e){return Boolean(e.user.nonpersist.isSessionLoggedOut)},T=function(e){return e.user.persist.currentUser},D=function(e){return e.user.persist.psuid},F=function(e){return Boolean(e.user.persist.currentUser.uid)},B=Object(l.a)((function(e){return e.user.persist.jwtToken}),P,(function(e,t){return{jwtToken:e,oauthToken:t}})),J=Object(l.a)(B,(function(e){var t;return Boolean(null!==(t=e.jwtToken)&&void 0!==t?t:e.oauthToken)})),z=[r.Avatar,r.Info,r.Email],G=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I({oauthToken:e})),n(Object(N.f)()),t.prev=2,t.next=5,Object(m.m)(e);case 5:a=t.sent,n(M({user:a})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435");case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(n,a){var r,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=D(a()),t.next=4,_();case 4:c=t.sent,r&&r!==c.payload.psuid&&n(Object(f.a)()),n(I({jwtToken:c.jwtToken,psuid:c.payload.psuid})),null===e||void 0===e||e(),t.next=20;break;case 10:t.prev=10,t.t0=t.catch(0),o=t.t0.code,t.t1=o,t.next=t.t1===p.b.JsApiCancelled?16:t.t1===p.b.JsApiMethodNotAvailable?17:18;break;case 16:return t.abrupt("return",console.warn(t.t0));case 17:return t.abrupt("return",C());case 18:console.error(t.t0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437");case 20:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},V=function(){return function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(z);case 3:n=e.sent,a=n.userInfo,t(M({user:a.payload})),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(0),r=e.t0.code,e.t1=r,e.next=e.t1===p.b.JsApiDenied||e.t1===p.b.JsApiCancelled?14:e.t1===p.b.JsApiMethodNotAvailable?15:16;break;case 14:return e.abrupt("return",console.warn(e.t0));case 15:return e.abrupt("return",C());case 16:console.error(e.t0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435");case 18:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},H=function(){return function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(q((function(){t(Object(N.f)())})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=function(){return function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(n()),e.prev=1,e.next=4,E();case 4:if(r=e.sent,a&&(null===r||void 0===r?void 0:r.payload.psuid)!==a&&t(Object(f.a)()),r){e.next=9;break}return e.abrupt("return");case 9:if(c=r.payload.psuid,l=n(),s=l.user.persist.loggedOutPsuid,c!==s){e.next=13;break}return e.abrupt("return");case 13:t(I({jwtToken:r.jwtToken,psuid:c})),t(Object(N.f)()),e.next=27;break;case 17:e.prev=17,e.t0=e.catch(1),u=e.t0.code,a&&t(Object(f.a)()),e.t1=u,e.next=e.t1===p.b.JsApiCancelled?24:e.t1===p.b.JsApiMethodNotAvailable?25:26;break;case 24:return e.abrupt("return",console.warn(e.t0));case 25:return e.abrupt("return",t(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=P(a),!U(a)){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,c=x({withError:!0})){e.next=10;break}return r&&t(G(r)),e.abrupt("return");case 10:r&&r!==c&&t(Object(f.a)()),t(G(c)),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(5),o=e.t0.code,r&&t(Object(f.a)()),e.t1=o,e.next=e.t1===p.b.OauthAccessDenied?22:23;break;case 22:return e.abrupt("return",console.warn(e.t0));case 23:console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()));case 26:console.error(e.t0);case 27:case"end":return e.stop()}var l}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}()},Z=Object(b.b)("user",{whitelist:["persist"]});t.e=Object(d.b)(Z,S.reducer)},,,function(e,t,n){e.exports={image:"styles_image__Xibal","button-wrapper":"styles_button-wrapper__1xmRh",button:"styles_button__3ugFI","date-1":"styles_date-1__1KrEV","date-2":"styles_date-2__u1uuX",map:"styles_map__1GZMr","place-1":"styles_place-1__2BRJQ","place-2":"styles_place-2__1cKpq",gallery:"styles_gallery__33Vja","gallery-header":"styles_gallery-header__2mb0M","gallery-content":"styles_gallery-content__3RMTY","gallery-card":"styles_gallery-card__1qkm9",description:"styles_description__hdSqE","description-line-1":"styles_description-line-1__26Xb3","description-line-2":"styles_description-line-2__20hRv","description-line-3":"styles_description-line-3__1VXVh","description-line-4":"styles_description-line-4__2BYM0","description-line-5":"styles_description-line-5__3aCps",recommended:"styles_recommended__3JCFj"}},function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return y}));var a=n(1),r=n.n(a),c=n(3),i=n(10),o=n(13),s=n(12),u=n(5),l={data:{},ui:{}},d=Object(i.c)({name:"event",initialState:l,reducers:{fetchStart:function(e,t){var n=t.payload.id;e.data[n]||(e.data[n]={event:null,schedule:null,updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isUpdating:!1}),e.data[n].event?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n=t.payload,a=n.id,r=n.event;e.data[a].event=r.event,e.data[a].schedule=r.scheduleInfo,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError:function(e,t){var n=t.payload.id;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1},setEvents:function(e,t){t.payload.events.forEach((function(t){if(t){var n=t.event.id;e.data[n]||(e.data[n]={event:null,schedule:null,updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isUpdating:!1}),e.data[n].event=t.event,e.data[n].schedule=t.scheduleInfo,e.data[n].updatedAt=Date.now()}}))}}}),f=d.actions,p=f.fetchStart,m=f.fetchSuccess,b=f.fetchError,v=f.setEvents,h=function(e){return function(t){var n;return null!==(n=t.event.data[e])&&void 0!==n?n:{}}},y=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((c=a().event.data[e])&&c.updatedAt+3e5>Date.now())){t.next=3;break}return t.abrupt("return");case 3:return n(p({id:e})),t.prev=4,t.next=7,Object(s.f)(e);case 7:i=t.sent,n(m({id:e,event:i})),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),console.error(t.t0),n(b({id:e,error:t.t0}));case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}()},_=Object(u.b)("events",{transforms:[Object(u.c)(l.ui)]});t.a=Object(o.b)(_,d.reducer)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o}));n(67);var a,r={defer:!0,clickmap:!0,trackLinks:!0,trackHash:!0,accurateTrackBounce:!0,ecommerce:"dataLayer"};function c(){var e,t,n;window.dataLayer=null!==(e=window.dataLayer)&&void 0!==e?e:[],null===(t=(n=window).ym)||void 0===t||t.call(n,62405404,"init",r)}function i(e,t){var n,a;null===(n=(a=window).ym)||void 0===n||n.call(a,62405404,"hit",e,t)}function o(e,t){var n,a;null===(n=(a=window).ym)||void 0===n||n.call(a,62405404,"reachGoal",e,t)}!function(e){e.OrderInitiated="order_initiated",e.OrderCompleted="order_completed",e.OrderError="order_error"}(a||(a={}))},,,function(e,t,n){e.exports={"page-header":"styles_page-header__3SRj-","page-header_clear":"styles_page-header_clear__1-0qG","menu-button":"styles_menu-button__27a1S","backward-button":"styles_backward-button__1gLVd","burger-menu-icon":"styles_burger-menu-icon__30H4q",logo:"styles_logo__3HQmN",text:"styles_text__2t8C3","suggest-button":"styles_suggest-button__jwrxc","suggest-icon":"styles_suggest-icon__YMWw5","icon-white":"styles_icon-white__3C4HZ","icon-black":"styles_icon-black__3s7hW"}},function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(3),i=n(10),o=n(83),s=n(13),u=n(38),l=n(7);function d(e,t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,o,s,u,d,f,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.paymentToken,c=t.cost,i=t.id,o=n.email,s={supportedMethods:"yandex",data:{userEmail:o,paymentToken:a}},u={id:i.toString(),total:{label:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0431\u0438\u043b\u0435\u0442\u0430",amount:{value:c.toString(),currency:"RUB"}}},window.PaymentRequest){e.next=6;break}throw new l.a(l.b.JsApiMethodNotAvailable,"window.PaymentRequest is not available in this browser version.");case 6:return e.prev=6,d=new PaymentRequest([s],u),e.next=10,d.canMakePayment();case 10:if(e.sent){e.next=13;break}throw new l.a(l.b.JsApiMethodNotAvailable,"request.canMakePayment() returns false.");case 13:return e.next=15,d.show();case 15:return f=e.sent,e.next=18,f.complete("success");case 18:e.next=28;break;case 20:if(e.prev=20,e.t0=e.catch(6),!(p=e.t0.message).includes("[NOT_STARTED]")){e.next=25;break}throw new l.a(l.b.JsApiCancelled,"window.PaymentRequest canceled.");case 25:if(!p.includes("Already called show")){e.next=27;break}throw new l.a(l.b.JsApiAlreadyShown,"window.PaymentRequest already shown.");case 27:throw e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,20]])})))).apply(this,arguments)}var p=n(70),m=n(5),b=n(67),v=n(23);function h(e){return{order_id:e.id,price:e.cost,price_without_discount:e.cost}}function y(e){return _.apply(this,arguments)}function _(){return(_=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(t),Object(v.d)(v.a.OrderInitiated,n),e.next=4,Object(b.a)(v.a.OrderInitiated,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(t),Object(v.d)(v.a.OrderCompleted,n),e.next=4,Object(b.a)(v.a.OrderCompleted,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t=h(e);Object(v.d)(v.a.OrderError,t)}var E=n(30);function w(e){var t,n,a;return Object(E.a)({name:"window.yandex.app.push.getPushTokenForTransaction",args:[e],scope:null===(t=window)||void 0===t||null===(n=t.yandex)||void 0===n||null===(a=n.app)||void 0===a?void 0:a.push,method:"getPushTokenForTransaction"})}var k,x,C=n(12);!function(e){e.OfflineCash="offline-cash",e.OfflineCard="offline-card",e.YandexPayments="yandex-payments",e.OnlineExternalPayments="online-external-payments"}(k||(k={})),function(e){e.Mail="mail",e.Courier="courier"}(x||(x={}));var N=null!=="https://yandex.github.io/miniapp-example"?"https://yandex.github.io/miniapp-example":"",A=x.Courier,S=new Set(["1","on","true"]),L=function(){var e,t=new URLSearchParams(window.location.search).get("native_checkout"),n=window.localStorage.getItem("miniapp_example_native_checkout"),a=null!==(e=null!==t&&void 0!==t?t:n)&&void 0!==e?e:"",r=S.has(a),c=Boolean(window.YandexCheckoutRequest);return t&&window.localStorage.setItem("miniapp_example_native_checkout",t),r&&c}();function I(e){switch(e){case x.Mail:return{id:x.Mail,label:"\u041f\u043e\u0447\u0442\u0430 \u0420\u043e\u0441\u0441\u0438\u0438",datetimeEstimate:"6-7 \u0434\u043d\u0435\u0439",amount:{value:0,currency:"RUB"}};case x.Courier:return{id:x.Courier,label:"\u041a\u0443\u0440\u044c\u0435\u0440",datetimeEstimate:"3-4 \u0434\u043d\u044f",amount:{value:1e4,currency:"RUB"}}}}function M(e,t){var n=t.orders.find((function(t){return t.id===e}));return null===n||void 0===n?void 0:n.shippingAddress}function R(e,t){var n,a=t.orders.find((function(t){return t.id===e})),r=null===a||void 0===a||null===(n=a.shippingOption)||void 0===n?void 0:n.id;if(r)return I(r)}function P(e,t){var n,a,r,c,i,o=t.tickets,s=null!==(n=null===o||void 0===o||null===(a=o[0])||void 0===a||null===(r=a.price)||void 0===r?void 0:r.min)&&void 0!==n?n:0,u=null!==(c=null===(i=I(e))||void 0===i?void 0:i.amount.value)&&void 0!==c?c:0,l={amount:{value:s+u,currency:"RUB"},details:null};return u>0&&(l.details=[{label:"\u0411\u0438\u043b\u0435\u0442\u044b",amount:{value:s,currency:"RUB"}},{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",amount:{value:u,currency:"RUB"}}]),l}var U=!0;function T(e){var t="string"===typeof e?{paymentToken:e}:void 0,n=[{type:k.OfflineCash},{type:k.OfflineCard},{type:k.YandexPayments,data:t}];return U&&n.push({type:k.OnlineExternalPayments,data:{paymentFormUrl:"https://sdelano.net/browser/cards/with3ds?redirect_url=https%3A%2F%2Fcheckout.tap.yandex.ru%2Fonline-external-payments%2Fsuccess"}}),n}function D(e,t){var n,a=t.title,r=t.image,c=(null!==r&&void 0!==r?r:{}).touchPrimary,i=P(A,t),o=T(),s=(n=A,[x.Mail,x.Courier].map((function(e){var t=I(e);return t.id===n&&(t.selected=!0),t})));return{total:i,orders:[{id:e,requestCity:!0,requestShippingAddress:!0,cartItems:[{title:a,count:1,image:c&&[{url:c.url,width:c.width,height:c.height}],amount:i.amount}],shippingOptions:s}],payerDetails:[{type:"name",require:!0},{type:"phone",require:!0},{type:"email",require:!0}],paymentOptions:o}}function F(e,t){if(!window.YandexCheckoutRequest)throw new l.a(l.b.JsApiMethodNotAvailable,"window.YandexCheckoutRequest is undefined.");var n=D(e,t),a={shopName:"MiniApp Example",shopIcon:"".concat(N,"/logo192.png")};return new window.YandexCheckoutRequest(n,a)}function B(e,t){try{return F(e,t)}catch(r){var n="TypeError"===r.name,a=r.message.includes("'online-external-payments' is not a valid enum");if(n&&a)return U=!1,F(e,t);throw r}}var J=n(14);n.d(t,"b",(function(){return K})),n.d(t,"k",(function(){return ee})),n.d(t,"c",(function(){return te})),n.d(t,"g",(function(){return ne})),n.d(t,"j",(function(){return re})),n.d(t,"h",(function(){return ce})),n.d(t,"i",(function(){return ie})),n.d(t,"f",(function(){return oe})),n.d(t,"d",(function(){return se})),n.d(t,"a",(function(){return ue}));var z={data:{orders:[]},ui:{}},G=Object(i.c)({name:"order",initialState:z,reducers:{fetchStart:function(e){e.ui.isLoading=!0},fetchSuccess:function(e,t){e.ui.isLoading=!1,e.data.orders=t.payload},fetchError:function(e){e.ui.isLoading=!1},orderCreationStart:function(e){e.ui.isCheckoutInProgress=!0,e.ui.isOrderCreationInProgress=!0},orderCreationSuccess:function(e,t){e.data.activeOrder=t.payload,e.ui.isOrderCreationInProgress=!1},orderCreationEnd:function(e){e.ui.isOrderCreationInProgress=!1},paymentStart:function(e){e.ui.isPaymentInProgress=!0},paymentEnd:function(e){e.ui.isPaymentInProgress=!1},checkoutEnd:function(e){e.ui.isCheckoutInProgress=!1,delete e.data.activeOrder}},extraReducers:function(e){e.addCase(u.a,(function(){return z}))}}),q=G.actions,V=q.fetchStart,H=q.fetchSuccess,X=q.fetchError,Z=q.paymentStart,Y=q.paymentEnd,K=q.checkoutEnd,Q=q.orderCreationStart,W=q.orderCreationSuccess,$=q.orderCreationEnd,ee=function(e){return Boolean(e.order.ui.isPaymentInProgress)},te=function(e){return Boolean(e.order.ui.isCheckoutInProgress)},ne=function(e){return Boolean(e.order.ui.isOrderCreationInProgress)},ae=function(e){return e.order.data.activeOrder},re=function(e){return e.order.data.orders},ce=Object(o.a)(re,(function(e){return Array.from(new Set(e.map((function(e){return e.event.id}))))})),ie=Object(o.a)(ce,(function(e){return e.order.ui}),(function(e){return e.event.ui}),(function(e,t,n){var a=e.some((function(e){var t;return null===(t=n[e])||void 0===t?void 0:t.isLoading}));return t.isLoading||a})),oe=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Object(J.a)(n())).jwtToken||a.oauthToken){e.next=3;break}return e.abrupt("return");case 3:return t(V()),e.prev=4,e.next=7,Object(C.g)(a);case 7:c=e.sent,t(H(c)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),t(X());case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}()},se=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){var i=Object(c.a)(r.a.mark((function c(i,o){var s,u;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!L){r.next=2;break}return r.abrupt("return",i(le(t)));case 2:return s=Object(J.a)(o()),i(Q()),r.prev=4,r.next=7,Object(C.b)({eventId:t.id,amount:1},s);case 7:return u=r.sent,r.next=10,y(u);case 10:i(W(u)),n(),r.next=19;break;case 14:if(r.prev=14,r.t0=r.catch(4),i($()),401!==r.t0.status||!a){r.next=19;break}return r.abrupt("return",i(Object(J.b)((function(){return i(e(t,n,!1))}))));case 19:case"end":return r.stop()}}),c,null,[[4,14]])})));return function(e,t){return i.apply(this,arguments)}}()},ue=function e(t,n){return function(){var a=Object(c.a)(r.a.mark((function a(c,i){var o,s,u,d;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=i(),s=Object(J.a)(o),u=ae(o),c(Z()),!ne(i())){a.next=6;break}throw new Error("Payment is not available. Order creating now");case 6:if(u){a.next=8;break}return a.abrupt("return",c(se(t,(function(){return e(t,n)}))));case 8:return Object(p.a)(t),a.prev=9,a.next=12,de(u,n);case 12:return a.next=14,be(u,n,s);case 14:return a.next=16,g(u);case 16:Object(p.b)(t,u.id),c(K()),a.next=30;break;case 20:a.prev=20,a.t0=a.catch(9),d=a.t0.code,j(u),a.t1=d,a.next=a.t1===l.b.JsApiCancelled||a.t1===l.b.JsApiAlreadyShown?27:28;break;case 27:return a.abrupt("return");case 28:console.error(a.t0),alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u0431\u0438\u043b\u0435\u0442\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437");case 30:return a.prev=30,c(Y()),c(oe()),a.finish(30);case 34:case"end":return a.stop()}}),a,null,[[9,20,30,34]])})));return function(e,t){return a.apply(this,arguments)}}()};function le(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var o,s,u,l,d,f,m,b,v,h,_,O,j,E,w,k,x;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(i.e)(),s=Object(J.a)(a()),t.prev=2,(f=B(o,e)).addEventListener("shippingOptionChange",(function(t){var n=R(o,t.checkoutState);if(n){var a=P(n.id,e);return t.updateWith({total:a})}})),f.addEventListener("paymentStart",(function(t){var n=function(){var n=Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=R(o,t.checkoutState),n.prev=1,n.next=4,Object(C.b)({amount:1,eventId:e.id,deliveryId:null===a||void 0===a?void 0:a.id},s);case 4:return u=n.sent,n.next=7,y(u);case 7:return n.abrupt("return",{paymentOptions:T(u.paymentToken)});case 10:return n.prev=10,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",{validationErrors:{error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u043b\u0430\u0442\u044b. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u043e\u043f\u043b\u0430\u0442\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"}});case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}}();t.updateWith(n())})),Object(p.a)(e),t.next=9,f.show();case 9:return m=t.sent,b=null!==(l=M(o,m))&&void 0!==l?l:{},v=b.rawAddress,h=void 0===v?"":v,_=null!==(d=m.payerDetails)&&void 0!==d?d:{},O=_.name,j=void 0===O?"":O,E=_.phone,w=void 0===E?"":E,k=_.email,x=void 0===k?"":k,u=u,t.next=15,be(u,{name:j,phone:w,email:x,address:h},s);case 15:return t.next=17,g(u);case 17:Object(p.b)(e,u.id),t.next=27;break;case 20:if(t.prev=20,t.t0=t.catch(2),"AbortError"!==t.t0.name){t.next=25;break}return t.abrupt("return");case 25:console.error(t.t0),alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u0431\u0438\u043b\u0435\u0442\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437");case 27:return t.prev=27,n(oe()),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,20,27,30]])})));return function(e,n){return t.apply(this,arguments)}}()}function de(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t,n);case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),a=e.t0.code,e.t1=a,e.next=e.t1===l.b.JsApiMethodNotAvailable?11:12;break;case 11:return e.abrupt("return");case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return(me=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,w(t);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.warn(e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function be(e,t,n){return ve.apply(this,arguments)}function ve(){return(ve=Object(c.a)(r.a.mark((function e(t,n,a){var c,i,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t.paymentToken);case 2:if(e.t1=c=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==c;case 6:if(!e.t0){e.next=10;break}e.t2=c,e.next=11;break;case 10:e.t2={};case 11:i=e.t2,o=i.pushToken,s=t.id;try{Object(C.n)({userInfo:n,paymentId:s,pushToken:o},a)}catch(r){console.error(r)}case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=Object(m.b)("order",{transforms:[Object(m.c)(z.ui)]});t.e=Object(s.b)(he,G.reducer)},function(e,t,n){"use strict";function a(){return"/"}function r(e){return"/event/".concat(e)}function c(e){return"/events/".concat(encodeURIComponent(e))}function i(e){return"/selection/".concat(encodeURIComponent(e))}function o(){return"/search"}function s(){return"/orders"}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(9),r=n(0),c=function(e){return Object(r.lazy)((function(){return Promise.all([new Promise((function(t){return setTimeout((function(){return t(e())}),50)})),new Promise((function(e){return setTimeout(e,500)}))]).then((function(e){return Object(a.a)(e,1)[0]}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(7);function r(e){var t=e.name,n=e.args,r=e.scope,c=e.method,i=r?r[c]:null;if(!i)throw new a.a(a.b.JsApiMethodNotAvailable,"".concat(t," is not available in this browser version."));return i.apply(r,n)}},function(e,t,n){e.exports={screen:"styles_screen__3Xc2f",hidden:"styles_hidden__319gL",screenEnter:"styles_screenEnter__1cDTX",screenEnterActive:"styles_screenEnterActive__3Aipd",screenExit:"styles_screenExit__16_m_",screenExitActive:"styles_screenExitActive__9q_ED",offset:"styles_offset__3ZkO6"}},function(e,t,n){e.exports={card:"styles_card__2fC7e",image:"styles_image__2rNd-",content:"styles_content__3r_Ib",right:"styles_right__39u8P",short:"styles_short__5IaPF"}},function(e,t,n){e.exports={modal:"style_modal__ArKGM",content:"style_content__36rzf",hidden:"style_hidden__153Qs",visible:"style_visible__2ITxB",body:"style_body__3TOLT",profile:"style_profile__4Kle_",psuid:"style_psuid__32HpM",logout:"style_logout__1unjr"}},function(e,t,n){e.exports={wrapper:"styles_wrapper__1LBcn",wrapper_loading:"styles_wrapper_loading__3wiy0","wrapper-visible_yes":"styles_wrapper-visible_yes__1gZE6",slideUp:"styles_slideUp__ugjBN","wrapper-visible_no":"styles_wrapper-visible_no__3CTrI",slideDown:"styles_slideDown__1-rC7",title:"styles_title__2H0i0","auto-select-box":"styles_auto-select-box__1KSTl",selected:"styles_selected__3i7jO","selected-city-label":"styles_selected-city-label__107bE","selected-city-name":"styles_selected-city-name__3y9wk",button:"styles_button__32WSn"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var a=n(10),r=n(13),c=n(5),i=Object(a.c)({name:"menu",initialState:{visible:!1,items:[],activeItem:""},reducers:{setItems:function(e,t){e.items=t.payload},setVisible:function(e,t){e.visible=t.payload}}}),o=i.actions,s=o.setItems,u=o.setVisible,l=Object(c.b)("menu");t.a=Object(r.b)(l,i.reducer)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(10),r=Object(a.b)("cleanup")},function(e,t,n){e.exports={card:"style_card__2T-VX",title:"style_title__RuqCf",annotation:"style_annotation__n8doS","image-wrapper":"style_image-wrapper__3JJK-","image-overlay":"style_image-overlay__29ffx",image:"style_image__Lux1b",preview:"style_preview__3loTl"}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(71),i=n(182),o=n.n(i);t.a=function(e){var t=e.itemsGap,n=void 0===t?c.a:t,a=e.count,i=e.card;return r.a.createElement("div",{className:o.a.events,style:{gridGap:"".concat(n,"px")}},Array(a).fill(0).map((function(e,t){return r.a.createElement(i,{key:t})})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){return(/iPad|iPhone|iPod/.test(navigator.platform)||/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(4),i=n(21),o=n(37),s=n(35),u=n(28),l=n(91),d=n(65),f=n(26),p=n.n(f),m=function(){return r.a.createElement(i.b,{to:Object(u.b)(),className:p.a.logo},"MiniApp Example")},b=function(e){var t=e.fill,n=void 0===t?"black":t,a=[p.a["suggest-icon"],p.a["icon-".concat(n)]].join(" ");return r.a.createElement("span",{className:a})};function v(e,t){return t?"".concat(p.a[e]," ").concat(p.a["".concat(e,"_").concat(t)]):p.a[e]}t.a=Object(a.memo)((function(e){var t=e.hasMenu,n=e.hasLogo,i=e.backward,f=e.mods,h=e.text,y=Object(o.d)(),_=Object(c.b)(),g=Object(a.useCallback)((function(){y.push(Object(u.e)())}),[y]),O=Object(a.useCallback)((function(){_(Object(s.c)(!0))}),[_]);return r.a.createElement("header",{className:v("page-header",f)},Boolean(i)&&r.a.createElement(l.a,{className:p.a["backward-button"],fill:i||"black"}),Boolean(t)&&r.a.createElement(d.a,{className:p.a["menu-button"],onClick:O},r.a.createElement("span",{className:p.a["burger-menu-icon"]})),n&&r.a.createElement(m,null),h&&r.a.createElement("span",{className:p.a.text},h),r.a.createElement(d.a,{className:p.a["suggest-button"],onClick:g},r.a.createElement(b,{fill:f?"white":"black"})))}))},,function(e,t,n){e.exports={list:"style_list__1E8sL",item:"style_item__2Gtnq","orders-text":"style_orders-text__2Hcw-",link:"style_link__5kR7b","active-item":"style_active-item__1n702"}},,,,,,function(e,t,n){e.exports={feed:"styles_feed__RntQS",title:"styles_title__2JRen",events:"styles_events___mJxb",item:"styles_item__2O9gA"}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(0),r=n(57);function c(e){var t=Object(a.useContext)(r.a).onBackward;return Object(a.useMemo)((function(){return t.bind(null,e)}),[t,e])}function i(){return Object(a.useContext)(r.a).isVisible}function o(){return Object(a.useContext)(r.a).ref}},function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return _})),n.d(t,"c",(function(){return g}));var a=n(1),r=n.n(a),c=n(3),i=n(6),o=n(56),s=n(10),u=n(13),l=n(12),d=n(5),f={data:{},ui:{}},p=Object(s.c)({name:"selections",initialState:f,reducers:{fetchStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={items:[],updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isUpdating:!1}),e.data[n].items.length?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n,a=t.payload,r=a.key,c=a.items,i=[],s=Object(o.a)(c);try{for(s.s();!(n=s.n()).done;){var u=n.value;u&&i.push({code:u.code,title:u.title,count:u.count,image:u.events&&u.events[0]&&u.events[0].eventPreview&&u.events[0].eventPreview.image})}}catch(l){s.e(l)}finally{s.f()}e.data[r].items=i,e.data[r].updatedAt=Date.now(),e.ui[r].isLoading=!1,e.ui[r].isUpdating=!1},fetchError:function(e,t){var n=t.payload.key;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1}}}),m=p.actions,b=m.fetchStart,v=m.fetchSuccess,h=m.fetchError,y=function(e){var t=Object(d.a)(Object(i.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.data[t]},_=function(e){var t=Object(d.a)(Object(i.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.ui[t]},g=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=Object(d.a)(Object(i.a)({geoid:t},e)),!((s=c().selections.data[o])&&s.updatedAt+3e5>Date.now())){n.next=4;break}return n.abrupt("return");case 4:return a(b({key:o})),n.prev=5,n.next=8,Object(l.k)(Object(i.a)(Object(i.a)({},e),{},{geoid:t}));case 8:u=n.sent,a(v({key:o,items:u.selections})),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(5),console.error(n.t0),a(h({key:o,error:n.t0}));case 16:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e,t){return n.apply(this,arguments)}}()},O=Object(d.b)("selections",{stateReconciler:d.e,transforms:[Object(d.c)(f.ui)]});t.a=Object(u.b)(O,p.reducer)},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),r=Object(a.createContext)({onBackward:function(){},isVisible:!1,ref:Object(a.createRef)()})},function(e,t,n){e.exports={card:"styles_card__2krq5",image:"styles_image__3rHyi",right:"styles_right__3yAG9",title:"styles_title__1qP6K",description:"styles_description__2Ze_3"}},function(e,t,n){e.exports={input:"styles_input__ldYiA",wrapper:"styles_wrapper__1qFlf","wrapper-visible_yes":"styles_wrapper-visible_yes__3Xlii",slideUp:"styles_slideUp__2GPyJ","wrapper-visible_no":"styles_wrapper-visible_no__2Kq0Z",slideDown:"styles_slideDown__3yIqZ","city-list":"styles_city-list__2FmDB","city-item":"styles_city-item__TNmcc"}},,,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(180),i=n.n(c);t.a=function(e){var t=e.className,n=e.children,a=e.onClick,c=[i.a.clear,t].filter(Boolean).join(" ");return r.a.createElement("button",{className:c,onClick:a},n)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),r=n.n(a),c=n(3),i=n(7),o=n(30);function s(e,t){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function e(t,n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)({name:"window.yandex.app.reportGoalReached",args:[t,n],scope:null===(a=window)||void 0===a||null===(c=a.yandex)||void 0===c?void 0:c.app,method:"reportGoalReached"});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code!==i.b.JsApiMethodNotAvailable){e.next=10;break}return e.abrupt("return");case 10:console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}},,,function(e,t,n){"use strict";function a(e){var t,n,a,r=null===(t=e.tickets)||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.price)||void 0===a?void 0:a.min;return{id:e.id,name:e.title,category:e.type.name,price:r?r/100:void 0}}function r(e){var t,n,a;return null===(t=e.tickets)||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.price)||void 0===a?void 0:a.currency.toUpperCase()}function c(e){window.dataLayer.push({ecommerce:{currencyCode:r(e),detail:{products:[a(e)]}}})}function i(e){window.dataLayer.push({ecommerce:{currencyCode:r(e),add:{products:[a(e)]}}})}function o(e,t){window.dataLayer.push({ecommerce:{currencyCode:r(e),purchase:{actionField:{id:t.toString()},products:[a(e)]}}})}n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=18},function(e,t,n){e.exports={card:"styles_card__eFyRm",image:"styles_image__1XdLR",title:"styles_title__2aX7M",description:"styles_description__hf2zy"}},function(e,t,n){e.exports={container:"styles_container__2ZLnU",image:"styles_image__1OXdh",stub:"styles_stub__2rGlh","stub-hidden":"styles_stub-hidden__wNOO_",fadeIn:"styles_fadeIn__Wb4n6"}},function(e,t,n){e.exports={title:"styles_title__1IJnF",events:"styles_events__3m_nB",event:"styles_event__15ocv",link:"styles_link__OwBgq"}},function(e,t,n){"use strict";var a=n(9),r=n(0),c=n.n(r),i=n(73),o=n.n(i);t.a=function(e){var t=e.bgColor||"#555",n=Object(r.useState)(!1),i=Object(a.a)(n,2),s=i[0],u=i[1],l=Object(r.useCallback)((function(){e.src&&u(!0)}),[u,e.src]),d=[o.a.stub,s&&o.a["stub-hidden"]].filter(Boolean).join(" "),f=[e.className,o.a.container].filter(Boolean).join(" ");return c.a.createElement("div",{className:f},c.a.createElement("img",{className:o.a.image,onLoad:l,src:e.src?e.src.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",srcSet:e.src2x?"".concat(e.src2x.url," 2x"):void 0,alt:e.alt}),c.a.createElement("div",{className:d,style:{backgroundColor:t}}))}},,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(8),i=n(58),o=n.n(i);t.a=function(){return r.a.createElement("div",{className:o.a.card},r.a.createElement(c.a,{className:o.a.image}),r.a.createElement("div",{className:o.a.right},r.a.createElement(c.b,{className:o.a.title}),r.a.createElement(c.b,{className:o.a.description})))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(41),i=n(22),o=n(6),s=n(56),u=n(9),l=n(37),d=n(308),f=n(307),p=n(57),m=n(31),b=n.n(m),v=function(e){var t=e.isVisible,n=e.transitions,i=e.screen,o=e.onBackward,s=Object(c.a)()?"":[b.a.screen,!t&&!n&&b.a.hidden].filter(Boolean).join(" "),u=Object(a.useRef)(null),l=Object(a.useMemo)((function(){return{onBackward:o,isVisible:t,ref:u}}),[o,t,u]);return r.a.createElement(p.a.Provider,{value:l},r.a.createElement("div",{className:s,ref:u},r.a.createElement(i.component,{params:i.params,location:i.location})))},h={enter:b.a.screenEnter,enterActive:b.a.screenEnterActive,exit:b.a.screenExit,exitActive:b.a.screenExitActive},y={onEnter:function(e){e.previousElementSibling&&e.previousElementSibling.classList.add(b.a.offset)},onExit:function(e){e.previousElementSibling&&e.previousElementSibling.classList.remove(b.a.offset)}},_={enter:600,exit:500};var g=function(e){var t=e.screens,n=e.maxDepth,p=void 0===n?10:n,m=e.transitions,b=void 0!==m&&m,g=Object(a.useState)([]),O=Object(u.a)(g,2),j=O[0],E=O[1],w=Object(l.e)(),k=Object(l.d)(),x=Object(c.a)();!function(e){var t=Object(l.e)();Object(a.useEffect)(e,[t])}((function(){x&&window.scrollTo(0,0);var e="POP"===k.action,n="REPLACE"===k.action;if(e&&j.length>1)E(j.slice(0,-1));else{var a,r=null,c=null,u=Object(s.a)(t);try{for(u.s();!(a=u.n()).done;){var d=a.value;if(c=Object(l.c)(w.pathname,d)){r=d;break}}}catch(v){u.e(v)}finally{u.f()}if(r&&c){var f={id:w.key||Date.now().toString(),component:r.component,params:c.params,location:Object(o.a)({},w)};if(e&&1===j.length)E([f]);else if(n)if(r.component===j[j.length-1].component){var m=Object(i.a)(j);m[j.length-1]=Object(o.a)(Object(o.a)({},m[j.length-1]),{},{params:f.params,location:f.location}),E(m)}else E([].concat(Object(i.a)(j.slice(0,-1)),[f]));else{var b=[].concat(Object(i.a)(j),[f]);b.length>p&&b.splice(0,j.length-p+1),E(b)}}else console.warn("No screen matched for route",w.pathname)}}));var C=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fallback;x&&window.scrollTo(0,0),k.length>1?k.goBack():t&&k.replace(t)}),[k,x]);if(b&&!x)return r.a.createElement(d.a,{component:null},j.map((function(e,t){return r.a.createElement(f.a,{key:e.id,timeout:_,classNames:h,enter:1!==j.length,exit:1!==j.length,onEnter:y.onEnter,onExit:y.onExit},r.a.createElement(v,{key:e.id,isVisible:t===j.length-1,transitions:!0,onBackward:C,screen:e}))})));if(x){var N=j[j.length-1];return N?r.a.createElement(v,{isVisible:!0,onBackward:C,screen:N}):null}return r.a.createElement(r.a.Fragment,null,j.map((function(e,t){return r.a.createElement(v,{key:e.id,isVisible:t===j.length-1,onBackward:C,screen:e})})))},O=n(52);function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(c.a)()&&"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),function(){return r.a.createElement(g,{screens:e,maxDepth:t.maxDepth,transitions:t.transitions})}}n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O.b})),n.d(t,"c",(function(){return O.c}))},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return g}));var a=n(1),r=n.n(a),c=n(3),i=n(6),o=n(10),s=n(13),u=n(12),l=n(5),d=n(18),f={data:{},ui:{}},p=Object(o.c)({name:"actual-events",initialState:f,reducers:{fetchStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={items:[],updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isUpdating:!1}),e.data[n].items.length?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n=t.payload,a=n.key,r=n.items;e.data[a].items=r,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError:function(e,t){var n=t.payload.key;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1}}}),m=p.actions,b=m.fetchStart,v=m.fetchSuccess,h=m.fetchError,y=function(e){var t=Object(l.a)(Object(i.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.data[t]},_=function(e){var t=Object(l.a)(Object(i.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.ui[t]},g=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,f,p;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=Object(l.a)(Object(i.a)({geoid:t},e)),!((s=c().actualEvents.data[o])&&s.updatedAt+3e5>Date.now())){n.next=4;break}return n.abrupt("return");case 4:return a(b({key:o})),n.prev=5,n.next=8,Object(u.c)(Object(i.a)(Object(i.a)({},e),{},{geoid:t}));case 8:f=n.sent,(p=f.events).prefetchItems&&(a(Object(d.d)({events:p.prefetchItems})),delete p.prefetchItems),a(v({key:o,items:p.items})),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(5),console.error(n.t0),a(h({key:o,error:n.t0}));case 18:case"end":return n.stop()}}),n,null,[[5,14]])})));return function(e,t){return n.apply(this,arguments)}}()},O=Object(l.b)("actual-events",{stateReconciler:l.e,transforms:[Object(l.c)(f.ui)]});t.c=Object(s.b)(O,p.reducer)},function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return k}));var a=n(1),r=n.n(a),c=n(3),i=n(6),o=n(22),s=n(10),u=n(13),l=n(12),d=n(5),f=n(18),p={data:{},ui:{}},m=Object(s.c)({name:"rubric-events",initialState:p,reducers:{fetchStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[n].events.items.length?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n=t.payload,a=n.key,r=n.events,c=n.title;e.data[a].title=c,e.data[a].events=r,e.data[a].hasMoreItems=Boolean(r.paging.total>r.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError:function(e,t){var n=t.payload.key;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1},fetchMoreStart:function(e,t){var n=t.payload.key;e.ui[n].isLoadingMore=!0},fetchMoreSuccess:function(e,t){var n,a=t.payload,r=a.key,c=a.events;(n=e.data[r].events.items).push.apply(n,Object(o.a)(c.items)),e.data[r].events.paging=c.paging,e.data[r].hasMoreItems=Boolean(c.paging.total>c.paging.offset+10),e.data[r].updatedAt=Date.now(),e.ui[r].isLoadingMore=!1},fetchMoreError:function(e,t){var n=t.payload.key;e.ui[n].isLoadingMore=!1}}}),b=m.actions,v=b.fetchStart,h=b.fetchSuccess,y=b.fetchError,_=b.fetchMoreStart,g=b.fetchMoreSuccess,O=b.fetchMoreError,j=function(e){return function(t){var n=Object(d.a)(Object(i.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.data[n]}},E=function(e){return function(t){var n=Object(d.a)(Object(i.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.ui[n]}},w=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,u,p,m,b;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=c().city.currentCity.geoid,s=Object(d.a)(Object(i.a)({geoid:o,code:e},t)),!((u=c().rubricEvents.data[s])&&u.updatedAt+3e5>Date.now())){n.next=5;break}return n.abrupt("return");case 5:return a(v({key:s})),n.prev=6,n.next=9,Object(l.i)(e,Object(i.a)({geoid:o,offset:0,limit:10},t));case 9:p=n.sent,m=p.title,(b=p.events).prefetchItems&&(a(Object(f.d)({events:b.prefetchItems})),delete b.prefetchItems),a(h({key:s,title:m,events:b})),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(6),console.error(n.t0),a(y({key:s,error:n.t0}));case 20:case"end":return n.stop()}}),n,null,[[6,16]])})));return function(e,t){return n.apply(this,arguments)}}()},k=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,u,p,m;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=c().city.currentCity.geoid,s=Object(d.a)(Object(i.a)({geoid:o,code:e},t)),a(_({key:s})),n.prev=3,u=c().rubricEvents.data[s].events.paging.offset,n.next=7,Object(l.i)(e,Object(i.a)({geoid:o,offset:u+10,limit:10},t));case 7:p=n.sent,(m=p.events).prefetchItems&&(a(Object(f.d)({events:m.prefetchItems})),delete m.prefetchItems),a(g({key:s,events:m})),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(3),console.error(n.t0),a(O({key:s,error:n.t0}));case 17:case"end":return n.stop()}}),n,null,[[3,13]])})));return function(e,t){return n.apply(this,arguments)}}()},x=Object(d.b)("rubric-events",{stateReconciler:d.e,transforms:[Object(d.c)(p.ui)]});t.a=Object(u.b)(x,m.reducer)},function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return C}));var a=n(1),r=n.n(a),c=n(3),i=n(6),o=n(56),s=n(22),u=n(10),l=n(13),d=n(12),f=n(5),p=n(18),m=n(53),b={data:{},ui:{}},v=Object(u.c)({name:"selection-events",initialState:b,reducers:{fetchStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[n].events.items.length?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n=t.payload,a=n.key,r=n.events,c=n.title;e.data[a].title=c,e.data[a].events=r,e.data[a].hasMoreItems=Boolean(r.paging.total>r.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError:function(e,t){var n=t.payload.key;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1},fetchMoreStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.ui[n].isLoadingMore=!0},fetchMoreSuccess:function(e,t){var n,a=t.payload,r=a.key,c=a.events;(n=e.data[r].events.items).push.apply(n,Object(s.a)(c.items)),e.data[r].events.paging=c.paging,e.data[r].hasMoreItems=Boolean(c.paging.total>c.paging.offset+10),e.data[r].updatedAt=Date.now(),e.ui[r].isLoadingMore=!1},fetchMoreError:function(e,t){var n=t.payload.key;e.ui[n].isLoadingMore=!1}},extraReducers:function(e){e.addCase(m.b,(function(e,t){var n,a=t.payload,r=a.key,c=a.items,s=Object(f.d)(r),u=Object(o.a)(c);try{for(u.s();!(n=u.n()).done;){var l=n.value;if(l){var d=Object(f.a)(Object(i.a)({code:l.code},s)),p={items:l.events,paging:{offset:0,total:l.count}};e.data[d]?(e.data[d].events=p,e.data[d].hasMoreItems=Boolean(l.count>10),e.data[d].updatedAt=Date.now()):(e.data[d]={title:l.title,events:p,hasMoreItems:Boolean(l.count>10),updatedAt:0},e.ui[d]={isLoading:!1,isLoadingMore:!1,isUpdating:!1})}}}catch(m){u.e(m)}finally{u.f()}}))}}),h=v.actions,y=h.fetchStart,_=h.fetchSuccess,g=h.fetchError,O=h.fetchMoreStart,j=h.fetchMoreSuccess,E=h.fetchMoreError,w=function(e){return function(t){var n=Object(f.a)(Object(i.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.data[n]}},k=function(e){return function(t){var n=Object(f.a)(Object(i.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.ui[n]}},x=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,u,l,m,b;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=c().city.currentCity.geoid,s=Object(f.a)(Object(i.a)({geoid:o,code:e},t)),!((u=c().selectionEvents.data[s])&&u.updatedAt+3e5>Date.now())){n.next=5;break}return n.abrupt("return");case 5:return a(y({key:s})),n.prev=6,n.next=9,Object(d.j)(e,Object(i.a)({geoid:o,offset:0,limit:10},t));case 9:l=n.sent,m=l.title,(b=l.events).prefetchItems&&(a(Object(p.d)({events:b.prefetchItems})),delete b.prefetchItems),a(_({key:s,title:m,events:b})),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(6),console.error(n.t0),a(g({key:s,error:n.t0}));case 20:case"end":return n.stop()}}),n,null,[[6,16]])})));return function(e,t){return n.apply(this,arguments)}}()},C=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a,c){var o,s,u,l,m;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=c().city.currentCity.geoid,s=Object(f.a)(Object(i.a)({geoid:o,code:e},t)),a(O({key:s})),n.prev=3,u=c().selectionEvents.data[s].events.paging.offset,n.next=7,Object(d.j)(e,Object(i.a)({geoid:o,offset:u+10,limit:10},t));case 7:l=n.sent,(m=l.events).prefetchItems&&(a(Object(p.d)({events:m.prefetchItems})),delete m.prefetchItems),a(j({key:s,events:m})),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(3),console.error(n.t0),a(E({key:s,error:n.t0}));case 17:case"end":return n.stop()}}),n,null,[[3,13]])})));return function(e,t){return n.apply(this,arguments)}}()},N=Object(f.b)("selection-events",{stateReconciler:f.e,transforms:[Object(f.c)(b.ui)]});t.a=Object(l.b)(N,v.reducer)},function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return g}));var a=n(1),r=n.n(a),c=n(22),i=n(3),o=n(10),s=n(13),u=n(12),l=n(5),d=n(18),f={data:{},ui:{}},p=Object(o.c)({name:"recommended-events",initialState:f,reducers:{fetchStart:function(e,t){var n=t.payload.key;e.data[n]||(e.data[n]={updatedAt:0}),e.ui[n]||(e.ui[n]={isLoading:!1,isUpdating:!1}),e.data[n].updatedAt?e.ui[n].isUpdating=!0:e.ui[n].isLoading=!0},fetchSuccess:function(e,t){var n=t.payload,a=n.key,r=n.data;e.data[a].top=r.top,e.data[a].concert=r.concert,e.data[a].cinema=r.cinema,e.data[a].theatre=r.theatre,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError:function(e,t){var n=t.payload.key;e.ui[n].isLoading=!1,e.ui[n].isUpdating=!1}}}),m=p.actions,b=m.fetchStart,v=m.fetchSuccess,h=m.fetchError,y=function(e){var t=Object(l.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.data[t]},_=function(e){var t=Object(l.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.ui[t]},g=function(){return function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i,o,s,f,p,m,y,_,g,O,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().city.currentCity.geoid,i=Object(l.a)({geoid:a}),!((o=n().recommendedEvents.data[i])&&o.updatedAt+3e5>Date.now())){e.next=5;break}return e.abrupt("return");case 5:return t(b({key:i})),e.prev=6,e.next=9,Object(u.h)({geoid:a});case 9:j=e.sent,t(Object(d.d)({events:[].concat(Object(c.a)((null===(s=j.top)||void 0===s?void 0:s.prefetchItems)||[]),Object(c.a)((null===(f=j.cinema)||void 0===f?void 0:f.prefetchItems)||[]),Object(c.a)((null===(p=j.concert)||void 0===p?void 0:p.prefetchItems)||[]),Object(c.a)((null===(m=j.theatre)||void 0===m?void 0:m.prefetchItems)||[]))})),(null===(y=j.top)||void 0===y?void 0:y.prefetchItems)&&delete j.top.prefetchItems,(null===(_=j.cinema)||void 0===_?void 0:_.prefetchItems)&&delete j.cinema.prefetchItems,(null===(g=j.concert)||void 0===g?void 0:g.prefetchItems)&&delete j.concert.prefetchItems,(null===(O=j.theatre)||void 0===O?void 0:O.prefetchItems)&&delete j.theatre.prefetchItems,t(v({key:i,data:j})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),console.error(e.t0),t(h({key:i,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}()},O=Object(l.b)("recommended-events",{stateReconciler:l.e,transforms:[Object(l.c)(f.ui)]});t.a=Object(s.b)(O,p.reducer)},function(e,t,n){"use strict";var a=n(43),r=n(0),c=n.n(r),i=n(184),o=n.n(i),s=Object(r.forwardRef)((function(e,t){var n=e.className,r=e.type,i=Object(a.a)(e,["className","type"]),s=[o.a.input,n].filter(Boolean).join(" ");return c.a.createElement("input",Object.assign({ref:t,type:r||"text",className:s},i))}));t.a=s},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n(1),r=n.n(a),c=n(3),i={timeout:1e4,maximumAge:36e5};function o(){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition((function(t){return e(t.coords)}),t,i)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return e*(Math.PI/180)}function l(e,t,n,a){var r=Math.sin(u(n-e)/2)*Math.sin(u(n-e)/2)+Math.cos(u(e))*Math.cos(u(n))*Math.sin(u(a-t)/2)*Math.sin(u(a-t)/2);return 12742*Math.asin(Math.sqrt(r))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(65),i=n(52),o=n(92),s=n.n(o),u=function(e){var t=e.fill,n=void 0===t?"white":t,a=[s.a["backward-icon"],s.a["icon-".concat(n)]].join(" ");return r.a.createElement("span",{className:a})};t.a=function(e){var t=Object(i.a)();return r.a.createElement(c.a,{className:[s.a["backward-button"],e.className].filter(Boolean).join(" "),onClick:t},r.a.createElement(u,{fill:e.fill}))}},function(e,t,n){e.exports={"backward-icon":"styles_backward-icon__3EK-Q","icon-white":"styles_icon-white__30Xrl","icon-black":"styles_icon-black__1FNaZ","backward-button":"styles_backward-button__d5kZC"}},function(e,t,n){e.exports={content:"styles_content__2Cnjx",title:"styles_title__XAM43"}},function(e,t,n){e.exports={container:"styles_container__2LqZR",image:"styles_image__9Aiab",username:"styles_username__MPrq4"}},,,,,,,,,,,,,,,function(e,t,n){e.exports={loading:"styles_loading__l2xXc",rect:"styles_rect__39Mf0",text:"styles_text__O_35F"}},function(e,t,n){e.exports={block:"styles_block__fQZVR",filter:"styles_filter__2Vym1"}},function(e,t,n){e.exports={block:"styles_block__10trK",item:"styles_item__2uVU7"}},function(e,t,n){e.exports={content:"styles_content__3nFVw",title:"styles_title__2inpl"}},function(e,t,n){e.exports={list:"style_list__3pVg_",wrapper:"style_wrapper__IWliN",button:"style_button__2GIxG"}},function(e,t,n){e.exports={price:"styles_price__1D8ax",left:"styles_left__3RisO",right:"styles_right__3KXqq"}},function(e,t,n){e.exports={title:"styles_title__3XLML",notFound:"styles_notFound__2R52E"}},function(e,t,n){e.exports={title:"styles_title__3xg9O",event:"styles_event__3FTWc"}},function(e,t,n){e.exports={header:"styles_header__2L4R0",content:"styles_content__1NmrT"}},function(e,t,n){e.exports={container:"styles_container__2CjIh",button:"styles_button__1zNzf"}},function(e,t,n){e.exports={wrapper:"styles_wrapper__15WSd",select:"styles_select__1BaqC"}},function(e,t,n){e.exports={checkbox:"styles_checkbox__3iL51",label:"styles_label__3hGrm"}},function(e,t,n){e.exports={action:"styles_action__13iH4",invalid:"styles_invalid__1yKSC"}},function(e,t,n){e.exports={"city-modal":"styles_city-modal__1AgdR","city-modal-visible_yes":"styles_city-modal-visible_yes__3Ub-H",fadeIn:"styles_fadeIn__26BAg","city-modal-visible_no":"styles_city-modal-visible_no__1NmRJ",fadeOut:"styles_fadeOut__1X9f5"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n(81),c=n(23);function i(e){var t=Object(r.c)();Object(a.useEffect)((function(){t&&Object(c.b)(window.location.href,{params:e})}),[t,e])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(10),r=n(125),c={date:Object(r.a)(new Date).toString(),period:1},i=Object(a.c)({name:"date-filter",initialState:c,reducers:{setDate:function(e,t){e.date=t.payload.date,e.period=t.payload.period||1}}}),o=i.actions.setDate;t.a=i.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(60),r=function(e){return Object(a.format)(e,"YYYY-MM-DD").toString()},c=function(e){return Object(a.parse)(e)}},function(e,t,n){"use strict";var a=n(9),r=n(0),c=n.n(r);function i(e){var t=e.threshold,n=e.ref,c=e.isLoading,i=e.loadMore,o=e.hasMore,s=function(e,t){var n=Object(r.useState)(),c=Object(a.a)(n,2),i=c[0],o=c[1],s=Object(r.useRef)(t);return Object(r.useLayoutEffect)((function(){if(e.current){s.current,0;var n=new IntersectionObserver((function(e){var t=Object(a.a)(e,1)[0];o(t.isIntersecting)}),t);return n.observe(e.current),function(){n.disconnect()}}}),[e,t]),i}(n,Object(r.useMemo)((function(){return{rootMargin:"0px 0px ".concat(t||0,"px 0px")}}),[t]))||!1;Object(r.useEffect)((function(){o&&(c||s&&i())}),[s,i,o,c])}var o=n(71),s=n(113),u=n.n(s),l=function(e){var t=e.itemsGap,n=void 0===t?o.a:t,s=Object(r.useRef)(null),l=function(e){var t=e.items,n=e.hasMore,c=e.loadMore,i=e.pageSize,o=Object(r.useState)(i),s=Object(a.a)(o,2),u=s[0],l=s[1],d=Object(r.useMemo)((function(){return t.slice(0,u)}),[t,u]),f=Object(r.useCallback)((function(){t.length>u?l(u+i):c()}),[c,u,i,t]);return[d,n||u<t.length,f]}({items:e.items,hasMore:e.hasMore,loadMore:e.loadMore,pageSize:e.pageSize}),f=Object(a.a)(l,3),p=f[0],m=f[1],b=f[2];return i({ref:s,isLoading:e.isLoadingMore,hasMore:m,loadMore:b,threshold:200}),c.a.createElement("div",{className:u.a.list,style:{gridGap:"".concat(n,"px")}},c.a.createElement(d,Object.assign({},e,{items:p})),e.isLoadingMore&&e.skeleton,c.a.createElement("div",{ref:s}))},d=function(e){return c.a.createElement(c.a.Fragment,null,e.items.map((function(t,n){return t?c.a.createElement(e.component,{key:n,event:t,onClick:e.onItemClick}):null})))};t.a=function(e){var t=e.itemsGap,n=void 0===t?o.a:t;return"loadable"===e.type?c.a.createElement(l,e):c.a.createElement("div",{className:u.a.list,style:{gridGap:"".concat(n,"px")}},c.a.createElement(d,e))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(21),i=n(28),o=n(75),s=n(128),u=n(39),l=n.n(u);t.a=Object(a.memo)((function(e){var t=e.event.eventPreview,n=t.id,a=t.title,u=t.argument,d=t.image,f=t.tickets,p=f&&f[0];return r.a.createElement(c.b,{to:Object(i.a)(n),className:l.a.card,onClick:e.onClick},r.a.createElement("div",{className:l.a["image-wrapper"]},d&&d.eventListCard?r.a.createElement(o.a,{className:l.a.image,alt:a,src:d.eventListCard,src2x:d.eventListCard2x,bgColor:d.bgColor}):r.a.createElement("div",{className:l.a.preview}),p&&r.a.createElement(s.a,{ticket:p,position:"left"}),d&&r.a.createElement("div",{className:l.a["image-overlay"]})),r.a.createElement("div",{className:l.a.description},r.a.createElement("div",{className:l.a.title},a),r.a.createElement("div",{className:l.a.annotation},u)))}))},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(129),i=n(114),o=n.n(i);t.a=function(e){return r.a.createElement("div",{className:[o.a.price,o.a[e.position||"left"]].join(" ")},r.a.createElement(c.a,{ticket:e.ticket}))}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(170),i="\xa0";t.a=function(e){var t=e.ticket,n=e.exact;if(!t.price||!t.price.min)return null;var a=[n?"":"\u043e\u0442".concat(i),(t.price.min||0)/100,i,Object(c.a)(t.price.currency)].filter(Boolean).join(i);return r.a.createElement(r.a.Fragment,null,a)}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(121),i=n.n(c),o=Object(a.forwardRef)((function(e,t){var n=e.type,a=e.className,c=e.disabled,o=e.formInvalid,s=e.children,u=e.onClick,l=[i.a.action,a,o&&i.a.invalid].filter(Boolean).join(" ");return r.a.createElement("button",{ref:t,type:n,className:l,onClick:u,disabled:c},s)}));t.a=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(8),i=n(183),o=n.n(i);t.a=function(){return r.a.createElement(c.a,{className:o.a.card})}},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(8),i=n(111),o=n.n(i);t.a=function(e){var t=e.className;return r.a.createElement("div",{className:[o.a.block,t].filter(Boolean).join(" ")},Array(5).fill(0).map((function(e,t){return r.a.createElement(c.a,{key:t,className:o.a.item})})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a={rub:"\u20bd",usd:"$"};function r(e){return a[e]}},,function(e,t,n){"use strict";var a,r=n(1),c=n.n(r),i=n(3),o=n(10),s=n(7),u=n(30);function l(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)({name:"window.yandex.autofill.getProfileData",args:[t],scope:null===(n=window)||void 0===n||null===(a=n.yandex)||void 0===a?void 0:a.autofill,method:"getProfileData"});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),"denied"!==e.t0.code){e.next=11;break}throw new s.a(s.b.JsApiDenied,"Autofill denied.");case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(e){e.Name="name",e.Email="email",e.Phone="phone",e.Address="address"}(a||(a={}));var f=new Promise((function(e,t){var n,a,r;if(null===(n=window.yandex)||void 0===n||null===(a=n.autofill)||void 0===a?void 0:a.getProfileData)return e();var c=document.createElement("script"),i=document.getElementsByTagName("script")[0];c.src="https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-latest.js",c.async=!0,c.onload=function(){return e()},c.onerror=function(){return t()},null===(r=i.parentNode)||void 0===r||r.insertBefore(c,i)}));function p(){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return e.abrupt("return",l([a.Name,a.Phone,a.Email,a.Address]));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return _}));var b=Object(o.c)({name:"autofill",initialState:{},reducers:{setAutofilledUser:function(e,t){e.user=t.payload}}}),v=b.actions.setAutofilledUser,h=function(e){return Boolean(e.autofill.user)},y=function(e){return e.autofill.user},_=function(){return function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r,i,o,u,l,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p();case 3:n=e.sent,a=n.email,r=n.lastName,i=n.firstName,o=n.middleName,u=n.phoneNumber,l=n.streetAddress,d=[r,i,o].filter(Boolean).join(" "),t(v({name:d,phone:u,email:a,address:l})),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(0),f=e.t0.code,![s.b.JsApiDenied,s.b.JsApiMethodNotAvailable].includes(f)){e.next=19;break}return e.abrupt("return",console.warn(e.t0));case 19:console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()};t.c=b.reducer},function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(8),i=n(72),o=n.n(i),s=function(){return r.a.createElement("div",{className:o.a.card},r.a.createElement(c.a,{className:o.a.image}),r.a.createElement(c.b,{className:o.a.title}),r.a.createElement(c.b,{className:o.a.description}))},u=n(50),l=n.n(u),d=function(){return r.a.createElement("div",{className:l.a.feed},r.a.createElement(c.b,{className:l.a.title}),r.a.createElement("div",{className:l.a.events},r.a.createElement("div",{className:l.a.item},r.a.createElement(s,null)),r.a.createElement("div",{className:l.a.item},r.a.createElement(s,null)),r.a.createElement("div",{className:l.a.item},r.a.createElement(s,null))))};t.a=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement(d,null),r.a.createElement(d,null),r.a.createElement(d,null))}},,,,,,,function(e,t,n){e.exports={clear:"styles_clear__ZHIHN"}},,function(e,t,n){e.exports={events:"styles_events__3RaZ8"}},function(e,t,n){e.exports={card:"styles_card__1j4tU"}},function(e,t,n){e.exports={input:"styles_input__2gjR5"}},function(e,t,n){e.exports={input:"styles_input__1gPFI"}},function(e,t,n){e.exports={title:"styles_title__354Bd"}},,,,function(e,t,n){e.exports=n(304)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(51),i=n.n(c),o=n(4),s=n(21),u=n(175),l=n(23),d=n(20),f=n(10),p=n(13),m=n(49),b=n(18),v=n(172),h=n(84),y=n(85),_=n(53),g=n(86),O=n(1),j=n.n(O),E=n(3),w=n(12),k=n(90),x=n(5),C=n(35),N={useGeolocation:!0,isFetchingLocation:!1,currentCity:w.a},A=Object(f.c)({name:"city",initialState:N,reducers:{setCity:function(e,t){e.currentCity=t.payload},setGeolocation:function(e,t){e.useGeolocation=t.payload},locationFetchStart:function(e){e.isFetchingLocation=!0},locationFetchSuccess:function(e){e.isFetchingLocation=!1},locationFetchFailed:function(e,t){e.isFetchingLocation=!1,e.useGeolocation=!1,t.payload&&alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e!")}}}),S=A.actions,L=S.setCity,I=S.setGeolocation,M=S.locationFetchStart,R=S.locationFetchSuccess,P=S.locationFetchFailed,U=function(e){return function(){var t=Object(E.a)(j.a.mark((function t(n){var a,r,c,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M()),t.prev=1,t.next=4,Object(k.a)();case 4:return a=t.sent,r={longitude:a.longitude,latitude:a.latitude},t.next=8,Object(w.d)(r);case 8:c=t.sent,i=c.cityInfo,n(L({name:i.name,geoid:i.geoid,longitude:i.longitude,latitude:i.latitude})),n(Object(C.b)(i.eventsMenu)),n(R()),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0),n(P(e));case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},T=function(){return function(){var e=Object(E.a)(j.a.mark((function e(t,n){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().city,e.prev=1,!a.useGeolocation){e.next=5;break}return t(U(!1)),e.abrupt("return");case 5:return e.next=7,Object(w.d)({longitude:a.currentCity.longitude,latitude:a.currentCity.latitude});case 7:r=e.sent,c=r.cityInfo,t(Object(C.b)(c.eventsMenu)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(E.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&n(U(!0)),n(I(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=Object(x.b)("city"),B=Object(p.b)(F,A.reducer),J=Object(f.c)({name:"city-list",initialState:{isLoading:!1,items:[]},reducers:{setLoading:function(e,t){e.isLoading=t.payload},setCityListResult:function(e,t){e.items=t.payload}}}),z=J.actions,G=z.setLoading,q=z.setCityListResult,V=Object(x.b)("city-list",{blacklist:["isLoading"]}),H=Object(p.b)(V,J.reducer),X=n(43),Z=n(6),Y={data:{results:{groups:[]},popularEvents:{events:[],updatedAt:0}},ui:{popularEvents:{isLoading:!1,isUpdating:!1},results:{isLoading:!1}}},K=Object(f.c)({name:"search",initialState:Y,reducers:{fetchPopularStart:function(e){e.data.popularEvents.events.length>0?e.ui.popularEvents.isUpdating=!0:e.ui.popularEvents.isLoading=!0},fetchPopularSuccess:function(e,t){e.data.popularEvents.events=t.payload,e.data.popularEvents.updatedAt=Date.now(),e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},fetchPopularError:function(e){e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},searchStart:function(e){e.ui.results.isLoading=!0,e.data.results.groups=[]},searchSuccess:function(e,t){e.ui.results.isLoading=!1,e.data.results.groups=t.payload.map((function(e){return{code:e.code,title:e.title,events:e.documents.map((function(e){return function(e){var t=e.object,n=t.id,a=t.title,r=t.argument,c=t.image,i=t.type,o=t.minPrice;return{eventPreview:{id:n,title:a,argument:r,image:c,type:i,tags:[],contentRating:null,tickets:o?[{id:null,price:{min:o.value,currency:o.currency,max:null}}]:[],userRating:null},scheduleInfo:{placesTotal:null,preview:null}}}(e)}))}}))},searchError:function(e){e.ui.results.isLoading=!1},resetResults:function(e){e.data.results.groups.length>0&&(e.data.results.groups=[])}}}),Q=K.actions,W=Q.fetchPopularStart,$=Q.fetchPopularSuccess,ee=Q.fetchPopularError,te=Q.searchStart,ne=Q.searchSuccess,ae=Q.searchError,re=Q.resetResults,ce=null;function ie(e,t){return t.map((function(t){return Object(Z.a)(Object(Z.a)({},t),{},{documents:t.documents.filter((function(t){return t.object.title.toLowerCase().includes(e.trim().toLowerCase())}))})})).filter((function(e){return e.documents.length}))}var oe=Object(x.b)("search",{transforms:[Object(p.a)((function(e,t){if("data"===t){var n=e,a=(n.results,Object(X.a)(n,["results"]));return Object(Z.a)(Object(Z.a)({},a),{},{results:{groups:[]}})}return e})),Object(x.c)(Y.ui)]}),se=Object(p.b)(oe,K.reducer);var ue=n(124),le=n(87),de=n(14),fe=n(27),pe=[m.FLUSH,m.REHYDRATE,m.PAUSE,m.PERSIST,m.PURGE,m.REGISTER],me=Object(d.c)({event:b.a,autofill:v.c,actualEvents:h.c,rubricEvents:y.a,selections:_.a,selectionEvents:g.a,city:B,cityList:H,search:se,menu:C.a,dateFilter:ue.a,recommendedEvents:le.a,user:de.e,order:fe.e}),be=Object(f.a)({reducer:me,middleware:Object(f.d)({serializableCheck:{ignoredActions:pe}})}),ve=Object(p.c)(be),he=be,ye=n(9),_e=n(41);var ge=n(29),Oe=n(42),je=n(8),Ee=n(110),we=n.n(Ee),ke=function(){return r.a.createElement("div",{className:we.a.block},Array(2).fill(0).map((function(e,t){return r.a.createElement(je.a,{key:t,className:we.a.filter})})))},xe=n(40),Ce=n(168),Ne=n(169),Ae=n(93),Se=n.n(Ae),Le=function(){return r.a.createElement("div",null,r.a.createElement(ke,null),r.a.createElement("div",{className:Se.a.content},r.a.createElement(je.b,{className:Se.a.title}),r.a.createElement(xe.a,{itemsGap:8,count:5,card:Ce.a}),r.a.createElement(je.b,{className:Se.a.title}),r.a.createElement(Ne.a,null)))},Ie=Object(ge.a)((function(){return n.e(2).then(n.bind(null,350))})),Me=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.dateFilter})),n=Object(o.c)((function(e){return e.city.currentCity})).geoid;return Object(a.useEffect)((function(){e(Object(h.d)(t,n)),e(Object(_.c)(t,n))}),[e,t,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(Le,null)},r.a.createElement(Ie,null)))},Re=n(173),Pe=n(17),Ue=n.n(Pe),Te=function(){return r.a.createElement("div",{className:Ue.a.container},r.a.createElement("div",{className:Ue.a.image}),r.a.createElement("div",{className:Ue.a["button-wrapper"]},r.a.createElement(je.a,{className:Ue.a.button})),r.a.createElement(je.b,{className:Ue.a["date-1"]}),r.a.createElement(je.b,{className:Ue.a["date-2"]}),r.a.createElement(je.a,{className:Ue.a.map}),r.a.createElement(je.b,{className:Ue.a["place-1"]}),r.a.createElement(je.b,{className:Ue.a["place-2"]}),r.a.createElement("div",{className:Ue.a.gallery},r.a.createElement(je.b,{className:Ue.a["gallery-header"]}),r.a.createElement("div",{className:Ue.a["gallery-content"]},r.a.createElement(je.a,{className:Ue.a["gallery-card"]}),r.a.createElement(je.a,{className:Ue.a["gallery-card"]}),r.a.createElement(je.a,{className:Ue.a["gallery-card"]}))),r.a.createElement("div",{className:Ue.a.description},Array(5).fill(0).map((function(e,t){return r.a.createElement(je.b,{key:t,className:Ue.a["description-line-".concat(t+1)]})}))),r.a.createElement("div",{className:Ue.a.recommended},r.a.createElement(Re.a,null)))},De=Object(ge.a)((function(){return n.e(0).then(n.bind(null,349))})),Fe=function(e){var t=e.id,n=Object(o.b)();return Object(a.useEffect)((function(){n(Object(b.c)(t)),n(Object(le.b)())}),[n,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(Te,null)},r.a.createElement(De,{id:t,skeleton:r.a.createElement(Te,null)})))},Be=n(80),Je=n(112),ze=n.n(Je),Ge=function(){return r.a.createElement("div",null,r.a.createElement(ke,null),r.a.createElement("div",{className:ze.a.content},r.a.createElement(je.b,{className:ze.a.title}),r.a.createElement(xe.a,{count:10,card:Be.a})))},qe=Object(ge.a)((function(){return n.e(5).then(n.bind(null,346))})),Ve=function(e){var t=e.code,n=Object(o.b)(),c=Object(o.c)((function(e){return e.dateFilter}));return Object(a.useEffect)((function(){n(Object(y.c)(t,c))}),[n,t,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(Ge,null)},r.a.createElement(qe,{code:t})))},He=Object(ge.a)((function(){return n.e(7).then(n.bind(null,347))})),Xe=function(e){var t=e.code,n=Object(o.b)(),c=Object(o.c)((function(e){return e.dateFilter}));return Object(a.useEffect)((function(){n(Object(g.c)(t,c))}),[n,t,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{hasLogo:!0,hasMenu:!0}),r.a.createElement(a.Suspense,{fallback:r.a.createElement(Ge,null)},r.a.createElement(He,{code:t})))},Ze=n(171),Ye=n(91),Ke=n(123),Qe=n(88),We=n(185),$e=n.n(We),et=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(""),c=Object(ye.a)(n,2),i=c[0],o=c[1],s=Object(a.useCallback)((function(t){var n=t.target.value;e.onChange(n),o(n)}),[o,e]);return Object(a.useEffect)((function(){t.current&&t.current.focus()}),[t]),r.a.createElement(Qe.a,{ref:t,className:$e.a.input,defaultValue:i,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c",onChange:s})},tt=n(126),nt=n(127);var at=n(186),rt=n.n(at),ct=function(){return r.a.createElement(r.a.Fragment,null,Array(3).fill(0).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(je.b,{className:rt.a.title}),r.a.createElement(xe.a,{count:3,card:Be.a}))})))},it=n(115),ot=n.n(it),st=function(e){var t=e.onItemClick,n=Object(o.c)((function(e){return e.search.data.results})).groups,c=Object(o.c)((function(e){return e.search.ui.results})).isLoading,i=function(e,t){var n=Object(a.useState)(!1),r=Object(ye.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){if(e){var n=window.setTimeout((function(){return i(!0)}),t);return function(){return clearTimeout(n)}}i(!1)}),[e,t]),c}(c,250);return i?r.a.createElement(ct,null):0!==n.length||c||i?r.a.createElement(r.a.Fragment,null,n.map((function(e){var n=e.code,a=e.title,c=e.events;return r.a.createElement("section",{key:n},r.a.createElement("h2",{className:ot.a.title},a),r.a.createElement(tt.a,{items:c,component:nt.a,onItemClick:t}))}))):r.a.createElement("div",{className:ot.a.notFound},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")},ut=n(28),lt=n(116),dt=n.n(lt),ft=function(e){var t=e.showTitle;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(je.b,{className:dt.a.title}),r.a.createElement("div",null,Array(15).fill(0).map((function(e,t){return r.a.createElement(je.b,{className:dt.a.event,key:t})}))))},pt=n(74),mt=n.n(pt),bt=function(e){var t=e.onLinkClick,n=Object(o.c)((function(e){return e.search.data.popularEvents})).events,a=Object(o.c)((function(e){return e.search.ui.popularEvents})).isLoading;return r.a.createElement("section",null,r.a.createElement("div",{className:mt.a.title},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b"),a&&r.a.createElement(ft,null),r.a.createElement("ul",{className:mt.a.events},n.map((function(e,n){if(!e)return null;var a=e.eventPreview,c=a.id,i=a.title;return r.a.createElement("li",{key:n,className:mt.a.event},r.a.createElement(s.b,{onClick:t,className:mt.a.link,to:Object(ut.a)(c)},i))}))))},vt=n(117),ht=n.n(vt),yt=function(){var e=Object(a.useState)(!1),t=Object(ye.a)(e,2),n=t[0],c=t[1],i=Object(o.b)();Object(a.useEffect)((function(){i(function(){var e=Object(E.a)(j.a.mark((function e(t,n){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=n().search.data.popularEvents)&&a.updatedAt+9e5>Date.now())){e.next=3;break}return e.abrupt("return");case 3:return t(W()),e.prev=4,r=n().city.currentCity.geoid,e.next=8,Object(w.c)({limit:15,geoid:r});case 8:c=e.sent,t($(c.events.items)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),t(ee());case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}())}),[i]),Object(Ke.a)();var s=Object(a.useMemo)((function(){return Object(Ze.a)(500,(function(e){e=e.trim(),c(Boolean(e)),i(e?function(e){return function(){var t=Object(E.a)(j.a.mark((function t(n,a){var r,c,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ce&&ce.abort(),ce=new AbortController,a().search.ui.results.isLoading||n(te()),t.prev=3,r=a().city.currentCity.geoid,t.next=7,Object(w.l)(e,r,ce.signal);case 7:c=t.sent,i=c.suggest.groups,n(ne(ie(e,i))),ce=null,t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(3),"AbortError"!==t.t0.name){t.next=17;break}return t.abrupt("return");case 17:console.error(t.t0),n(ae());case 19:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,n){return t.apply(this,arguments)}}()}(e):re())}))}),[i]),u=Object(a.useCallback)((function(){i(re())}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ht.a.header},r.a.createElement(Ye.a,{fill:"black"}),r.a.createElement(et,{onChange:s})),r.a.createElement("div",{className:ht.a.content},n?r.a.createElement(st,{onItemClick:u}):r.a.createElement(bt,{onLinkClick:u})))},_t=n(32),gt=n.n(_t),Ot=function(){return r.a.createElement("div",{className:gt.a.card},r.a.createElement(je.a,{className:gt.a.image}),r.a.createElement("div",{className:gt.a.content},r.a.createElement(je.b,{size:20,className:gt.a.text}),r.a.createElement(je.b,{size:16,className:gt.a.short}),r.a.createElement(je.b,{size:16,className:gt.a.short})),r.a.createElement("div",{className:gt.a.right},r.a.createElement(je.b,{size:20,className:gt.a.short}),r.a.createElement(je.b,{size:16,className:gt.a.text})))},jt=function(){return r.a.createElement(xe.a,{count:10,card:Ot})},Et=Object(ge.a)((function(){return n.e(3).then(n.bind(null,352))})),wt=function(){var e=Object(o.b)(),t=Object(o.c)(fe.h),n=r.a.createElement(jt,null);return Object(a.useEffect)((function(){e(Object(fe.f)())}),[e]),Object(a.useEffect)((function(){t.forEach((function(t){e(Object(b.c)(t))}))}),[t,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{backward:"black",hasLogo:!1,hasMenu:!1,text:"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"}),r.a.createElement(a.Suspense,{fallback:n},r.a.createElement(Et,{skeleton:n})))},kt=n(44),xt=n.n(kt),Ct=function(e){var t=e.text,n=e.to,a=e.onItemClick;return r.a.createElement("li",{className:xt.a.item},r.a.createElement(s.c,{exact:!0,onClick:a,className:xt.a.link,activeClassName:xt.a["active-item"],to:n},t))},Nt=function(e){var t=Object(o.c)(de.f),n=Object(o.c)(fe.j);return r.a.createElement("ul",{className:xt.a.list},t&&r.a.createElement("li",{className:xt.a.item},r.a.createElement(s.c,{exact:!0,onClick:e.onItemClick,className:[xt.a.link,xt.a["orders-text"]].join(" "),to:Object(ut.c)()},"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"),n.length>0&&r.a.createElement("span",null,n.length)),r.a.createElement(Ct,{to:"/",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",onItemClick:e.onItemClick}),e.tags.map((function(t){return r.a.createElement(Ct,{key:t.code,to:Object(ut.d)(t.code),text:t.name,onItemClick:e.onItemClick})})))},At=n(75),St=n(118),Lt=n.n(St),It=function(){var e=Object(o.b)(),t=Object(a.useCallback)((function(){e(Object(de.h)())}),[e]);return r.a.createElement("div",{className:Lt.a.container,onClick:t},r.a.createElement("button",{className:Lt.a.button},"\u0412\u043e\u0439\u0442\u0438"))},Mt=n(94),Rt=n.n(Mt),Pt=function(e){return{url:"https://avatars.yandex.net/get-yapic/".concat(e,"/islands-middle"),width:42,height:42}},Ut=function(e){return{url:"https://avatars.yandex.net/get-yapic/".concat(e,"/islands-retina-middle"),width:84,height:84}},Tt=function(){var e=Object(o.b)(),t=Object(o.c)(de.k),n=Object(o.c)(de.f),c=Object(o.c)(de.g),i=Object(a.useCallback)((function(){c||e(Object(de.c)())}),[e,c]);if(!n)return r.a.createElement(It,null);var s=t.display_name||"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",u=t.avatar_id||"default";return r.a.createElement("div",{className:Rt.a.container,onClick:i},r.a.createElement(At.a,{className:Rt.a.image,alt:s,src:Pt(u),src2x:Ut(u)}),r.a.createElement("div",{className:Rt.a.username},s))},Dt=n(119),Ft=n.n(Dt),Bt=function(e){var t=e.setCityModalVisibleCallback,n=Object(o.c)((function(e){return e.city.currentCity})),c=Object(a.useCallback)((function(){t(!0)}),[t]);return r.a.createElement("div",{className:Ft.a.wrapper},r.a.createElement("div",{className:Ft.a.select,onClick:c},n?n.name:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"))},Jt=n(33),zt=n.n(Jt),Gt=function(e){var t=e.setCityModalVisibleCallback,n=Object(o.b)(),c=Object(o.c)((function(e){return e.menu})),i=c.visible,s=c.items,u=Object(o.c)(de.f),l=Object(o.c)(de.j),d=Object(a.useCallback)((function(){t(!1),n(Object(C.c)(!1))}),[n,t]),f=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),p=Object(a.useCallback)((function(){n(Object(de.i)())}),[n]),m=[zt.a.modal,i?zt.a.visible:zt.a.hidden].join(" ");return r.a.createElement("div",{className:m,onClick:d},r.a.createElement("div",{className:zt.a.content,onClick:f},r.a.createElement("div",{className:zt.a.body},r.a.createElement("div",{className:zt.a.profile},r.a.createElement(Tt,null)),r.a.createElement(Bt,{setCityModalVisibleCallback:t}),r.a.createElement(Nt,{tags:s,onItemClick:d})),u&&r.a.createElement("div",{className:zt.a.footer},l&&r.a.createElement("p",{className:zt.a.psuid},"PSUID: ",l),r.a.createElement("div",{className:zt.a.logout,onClick:p},"\u0412\u044b\u0439\u0442\u0438"))))},qt=n(37),Vt=n(309);var Ht=n(120),Xt=n.n(Ht),Zt=function(e){var t=e.className,n=e.label,a=Object(X.a)(e,["className","label"]),c=[Xt.a.checkbox,t].filter(Boolean).join(" ");return r.a.createElement("label",{className:Xt.a.label},r.a.createElement("input",Object.assign({type:"checkbox",className:c},a)),n)},Yt=n(130),Kt=n(34),Qt=n.n(Kt),Wt=function(e){var t=e.visible,n=e.openCityModal,a=e.wasClosed,c=e.onSaveClick,i=e.useGeolocation,s=e.onGeolocationChanged,u=e.selectedCity,l=Object(o.c)((function(e){return e.city.isFetchingLocation})),d=[Qt.a.wrapper,t||a?Qt.a["wrapper-visible_".concat(t?"yes":"no")]:"",l&&Qt.a.wrapper_loading].join(" ");return r.a.createElement("div",{className:d},r.a.createElement("div",{className:Qt.a.title},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"),r.a.createElement("div",{className:Qt.a["auto-select-box"]},r.a.createElement(Zt,{checked:i,onChange:s,label:"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"})),r.a.createElement("div",{className:Qt.a.selected},r.a.createElement("div",{className:Qt.a["selected-city-label"]},"\u0413\u043e\u0440\u043e\u0434"),r.a.createElement("div",{className:Qt.a["selected-city-name"],onClick:n},u.name)),r.a.createElement(Yt.a,{className:Qt.a.button,onClick:c},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},$t=n(59),en=n.n($t),tn=function(e){var t=e.city,n=e.onCityClick,c=Object(a.useCallback)((function(){n(t)}),[n,t]);return r.a.createElement("li",{className:en.a["city-item"],onClick:c},t.name)},nn=function(e){var t=e.isLoading,n=e.items,a=e.onCityClick;return t?r.a.createElement(r.a.Fragment,null,"loading..."):r.a.createElement("ul",{className:en.a["city-list"]},n.map((function(e){return e?r.a.createElement(tn,{key:e.geoid,city:e,onCityClick:a}):null})))},an=function(e){var t=e.visible,n=e.onCitySelect,c=e.wasClosed,i=Object(o.b)(),s=Object(o.c)((function(e){return e.cityList})),u=s.items,l=s.isLoading,d=Object(a.useState)(u),f=Object(ye.a)(d,2),p=f[0],m=f[1],b=[en.a.wrapper,t||c?en.a["wrapper-visible_".concat(t?"yes":"no")]:""].join(" ");Object(a.useEffect)((function(){u.length?m(u):i(function(){var e=Object(E.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G(!0)),e.prev=1,e.next=4,Object(w.e)();case 4:n=e.sent,a=n.cities,t(q(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:t(G(!1));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[i,u]);var v=Object(a.useCallback)((function(e){var t=e.target.value.toLowerCase();t.trim()?m(u.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)}))):m(u)}),[u]);return r.a.createElement("div",{className:b},r.a.createElement(Qe.a,{className:en.a.input,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:v}),r.a.createElement(nn,{isLoading:l,items:p,onCityClick:n}))},rn=n(122),cn=n.n(rn),on=function(e){var t=e.visible,n=e.setCityModalVisibleCallback,c=Object(a.useRef)(null),i=Object(o.b)(),s=Object(qt.d)(),u=Object(o.c)((function(e){return e.city.currentCity})),l=Object(o.c)((function(e){return e.city.useGeolocation})),d=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(u),f=Object(a.useState)(u),p=Object(ye.a)(f,2),m=p[0],b=p[1],v=Object(a.useState)(!1),h=Object(ye.a)(v,2),y=h[0],_=h[1],g=Object(a.useState)(!1),O=Object(ye.a)(g,2),j=O[0],E=O[1],w=Object(a.useState)(!1),k=Object(ye.a)(w,2),x=k[0],C=k[1],N=Object(a.useState)(!1),A=Object(ye.a)(N,2),S=A[0],I=A[1],M=Object(a.useState)(!1),R=Object(ye.a)(M,2),P=R[0],U=R[1],F=[cn.a["city-modal"],t||y?cn.a["city-modal-visible_".concat(t?"yes":"no")]:""].join(" ");Object(a.useEffect)((function(){I(t)}),[I,t]),Object(a.useEffect)((function(){b(u),d&&d.name!==u.name&&(console.warn("Go to `/` route"),s.replace("/"))}),[b,u,d,s]);var B=Object(a.useCallback)((function(e){var t=e.target.checked;i(D(t))}),[i]),J=Object(a.useCallback)((function(){m.name!==u.name&&b(u),_(!0),U(!1),I(!1),n(!1)}),[m,u,b,_,U,I,n]),z=Object(a.useCallback)((function(){_(!0),I(!1),n(!1),i(L(m)),m.name!==u.name&&i(T())}),[I,n,i,m,u]),G=Object(a.useCallback)((function(e){b(e),C(!0),U(!1),I(!0),i(D(!1))}),[i,b,C,U,I]),q=Object(a.useCallback)((function(){E(!0),U(!0),I(!1)}),[E,U,I]);return Object(Vt.a)(c,J),r.a.createElement("div",{className:F},t&&r.a.createElement("div",{ref:c},r.a.createElement(Wt,{visible:S,openCityModal:q,onGeolocationChanged:B,useGeolocation:l,wasClosed:j,selectedCity:m,onSaveClick:z}),r.a.createElement(an,{visible:P,onCitySelect:G,wasClosed:x})))},sn=n(81),un=Object(sn.a)([{path:"/",exact:!0,component:Object(a.memo)((function(){return r.a.createElement(Me,null)}))},{path:"/event/:id",exact:!0,component:Object(a.memo)((function(e){var t=e.params.id;return r.a.createElement(Fe,{id:t})}))},{path:"/events/:code",exact:!0,component:Object(a.memo)((function(e){var t=e.params.code;return r.a.createElement(Ve,{code:t})}))},{path:"/selection/:code",exact:!0,component:Object(a.memo)((function(e){var t=e.params.code;return r.a.createElement(Xe,{code:t})}))},{path:"/search",exact:!0,component:Object(a.memo)((function(){return r.a.createElement(yt,null)}))},{path:"/orders",exact:!0,component:Object(a.memo)((function(){return r.a.createElement(wt,null)}))},{path:"*",component:Object(a.memo)((function(){return r.a.createElement("div",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")}))}],{maxDepth:10,transitions:!0}),ln=function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(ye.a)(t,2),c=n[0],i=n[1],s=Object(a.useCallback)((function(e){i(e)}),[i]);return Object(a.useEffect)((function(){e(T())}),[e]),Object(a.useEffect)((function(){Object(_e.a)()&&(document.body.style.overflow="auto")}),[]),function(){var e=Object(o.b)();Object(a.useEffect)((function(){e(Object(de.d)())}),[e]),Object(a.useEffect)((function(){var t=function(){"visible"===document.visibilityState&&e(Object(de.d)())};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}),[e])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement(un,null),r.a.createElement(Gt,{setCityModalVisibleCallback:s}),r.a.createElement(on,{setCityModalVisibleCallback:s,visible:c}))},dn=[];"IntersectionObserver"in window||dn.push(n.e(10).then(n.t.bind(null,345,7)));var fn=function(){var e=Object(a.useState)(Boolean(!dn.length)),t=Object(ye.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){dn.length&&Promise.all(dn).then((function(){return c(!0)}))}),[]),r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(ln,null))};n(303);Object(l.c)(),i.a.render(r.a.createElement(o.a,{store:he},r.a.createElement(u.a,{loading:null,persistor:ve},r.a.createElement(s.a,null,r.a.createElement(fn,null)))),document.getElementById("root"))}],[[190,6,9]]]);
//# sourceMappingURL=main.50bdbedf.chunk.js.map